{
  "hash": "f48ad341e8bc3fe7d9fe6a00594d7ca5",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Lightweight Contextual Entity Extraction for Radiology Notes using R\"\ndate: \"11th November 2026\"\ndate-modified: \"28 November 2026\"\ncategories:\n  - NHS\n  - NLP\nauthor: Bashir Abubakar\nimage: img/abubakar_1.png\nimage-alt: \"NLP entity extraction pipeline\"\nsubtitle: >\nexecute:\n    eval: false\n---\n\nWorking as a Mental Health Data Analyst within Yorkshire Ambulance Service NHS Trust, I often face the same barrier many NHS analysts do: the majority of clinical information sits locked away in free-text narratives. \nWhether it’s ambulance ePR notes, discharge summaries, or radiology reports, the language clinicians use is rich in meaning but extremely time-consuming to analyse manually.\n\nI became particularly aware of this challenge and much of the information analysts were searching for such as whether pneumonia was present, or whether pleural effusion was ruled out was buried in radiology reports. \nThe only option was to read each report individually, which was neither scalable nor reproducible.\n\nBecause of NHS information-governance restrictions, we can’t simply upload these data to an online API or large language model. \nAll analytical work must remain on secure, often CPU-only infrastructure, behind the NHS firewall. \nThat reality motivated me to design a lightweight, reproducible natural language processing (NLP) method in R something that analysts could run locally without GPUs or commercial AI services, yet still achieve clinically meaningful entity extraction.\n\nThe resulting workflow, prototyped using the MIMIC-IV radiology dataset, became a proof-of-concept for an approach that could, with further adaptation, be applied to NHS radiology narratives or other unstructured text sources such as ambulance ePCR notes.\n\n## Motivation: bridging the gap between manual audits and AI\n\nIn the NHS we often talk about AI, but most analysts still rely on spreadsheets and manual review. \nI wanted to build something that sits between those two worlds automated enough to scale, transparent enough to be trusted, and light enough to run on an NHS desktop.\n\nThe use case is clear: radiology reports describe a patient’s imaging findings in natural language. \nFor many analytical tasks such as population-level analytics, safety monitoring, or predictive modelling we only need to know which findings were mentioned and whether they were present or absent.\n\nYet standard keyword searches can’t tell us that. For example, a report stating \n\n\"The lungs are clear without focal consolidation, pleural effusion or pneumothorax.\" \n\ncontains the words consolidation, effusion, and pneumothorax, but all three are absent. \nA purely lexical match would incorrectly record them as present. \nContext understanding is therefore essential for accuracy.\n\nThat problem distinguishing what was said from what was meant became the centrepiece of my work and as can be seen in @fig-pipeline below which highlights the architectural design of my pipeline.\n\n![NLP entity extraction pipeline](img/abubakar_1.png){#fig-pipeline}\n\n## Designing a contextual extractor\n\nThe extractor works in two stages:\n\n1. Entity detection using simple but highly tuned dictionaries of anatomical and observation terms.\n2. Context interpretation that determines whether each observation is present, absent, or uncertain based on nearby cue phrases.\n\n### 1) Entity detection\n\nI began by building two curated dictionaries:\n\n- Anatomy terms – e.g., lung, pleura, mediastinum, heart, diaphragm, apex.\n- Observation terms – e.g., opacity, consolidation, pleural effusion, pneumothorax, fracture, nodule, cardiomegaly.\n\nThese lists are easily extended or localised for NHS reporting styles. \nEach term is converted into a case-insensitive regular expression. \nThe extractor then scans every sentence for matches and records start and end character offsets so that downstream systems can link the structured output back to the original text.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nanatomy_terms <- c(\"lungs\",\"pleura\",\"heart\",\"mediastinum\",\"diaphragm\")\n\nobservation_terms <- c(\"consolidation\",\"pleural effusion\",\"pneumothorax\",\"opacity\")\n```\n:::\n\n\n### 2) Context interpretation\n\nNext, I implemented a lightweight contextual layer inspired by the ConText algorithm used in clinical NLP research. \nRather than classifying with machine learning, it uses a set of linguistic rules negation, uncertainty, and termination triggers that define the scope of meaning within a sentence.\n\nFor example:\n\n- Pre-negation triggers: “no”, “without”, “free of”, “absent”, “negative for”\n- Post-negation triggers: “ruled out”, “excluded”\n- Uncertainty triggers: “possible”, “likely”, “cannot exclude”, “suspicious for”\n- Scope terminators: “but”, “however”, “although”\n\nThese rules are applied through regular-expression spans. \nEach observation term within the influence of a negation trigger is marked as absent; those under uncertainty cues are uncertain; all others default to present.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncontext_triggers <- list(\n  pre_neg = c(\"no\",\"without\",\"free of\",\"absent\",\"negative for\",\"not seen\",\"lack of\"),\n  post_neg = c(\"ruled out\",\"excluded\"),\n  pre_uncert = c(\"possible\",\"possibly\",\"likely\",\"cannot exclude\",\"suspicious for\",\n                 \"consistent with\",\"in keeping with\",\"questionable\",\"equivocal\"),\n  post_uncert = c(\"may represent\",\"may reflect\",\"could represent\",\"could reflect\",\n                  \"suggesting\",\"suggests\",\"suggestive of\",\"compatible with\"),\n  terminate = c(\"but\",\"however\",\"yet\",\"although\",\"except\",\"though\"),\n  pseudo_neg = c(\"no change\",\"no interval change\",\"no significant change\",\n                 \"no appreciable change\",\"no substantial change\")\n)\n```\n:::\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nassign_context_certainty_sentence <- function(sent_text, ents_sentence_df){\n  # detect negation/uncertainty cues and adjust certainty labels\n}\n```\n:::\n\n\n## Extracting the right sections\n\nTo minimise false positives, the extractor first isolates only the FINDINGS and IMPRESSION sections of each report, ignoring the INDICATION text that typically contains referral questions (“rule out pneumonia”).\n\nBy focusing on the interpretive segments, the algorithm analyses the clinician’s diagnostic statements rather than their initial hypotheses.\n\n## Testing on the MIMIC-IV dataset\n\nTo validate performance, I randomly sampled 100 radiology reports from the MIMIC-IV corpus, which contains de-identified hospital data approved for research use.\n\nEach file was read, processed, and converted into a structured tibble showing entity text, entity type, certainty, and character positions.\n\nAs seen in @tbl-descriptions below the radiology report processed through the extractor produces a structured table where every detected entity is recorded as a separate row.\n\n\n::: {#tbl-descriptions .cell tbl-cap='Structured output schema for contextual entity extraction from radiology reports'}\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"kaseorhmbl\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#kaseorhmbl table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#kaseorhmbl thead, #kaseorhmbl tbody, #kaseorhmbl tfoot, #kaseorhmbl tr, #kaseorhmbl td, #kaseorhmbl th {\n  border-style: none;\n}\n\n#kaseorhmbl p {\n  margin: 0;\n  padding: 0;\n}\n\n#kaseorhmbl .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#kaseorhmbl .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#kaseorhmbl .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#kaseorhmbl .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#kaseorhmbl .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#kaseorhmbl .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#kaseorhmbl .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#kaseorhmbl .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#kaseorhmbl .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#kaseorhmbl .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#kaseorhmbl .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#kaseorhmbl .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#kaseorhmbl .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#kaseorhmbl .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#kaseorhmbl .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#kaseorhmbl .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#kaseorhmbl .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#kaseorhmbl .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#kaseorhmbl .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#kaseorhmbl .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#kaseorhmbl .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#kaseorhmbl .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#kaseorhmbl .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#kaseorhmbl .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#kaseorhmbl .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#kaseorhmbl .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#kaseorhmbl .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#kaseorhmbl .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#kaseorhmbl .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#kaseorhmbl .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#kaseorhmbl .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#kaseorhmbl .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#kaseorhmbl .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#kaseorhmbl .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#kaseorhmbl .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#kaseorhmbl .gt_left {\n  text-align: left;\n}\n\n#kaseorhmbl .gt_center {\n  text-align: center;\n}\n\n#kaseorhmbl .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#kaseorhmbl .gt_font_normal {\n  font-weight: normal;\n}\n\n#kaseorhmbl .gt_font_bold {\n  font-weight: bold;\n}\n\n#kaseorhmbl .gt_font_italic {\n  font-style: italic;\n}\n\n#kaseorhmbl .gt_super {\n  font-size: 65%;\n}\n\n#kaseorhmbl .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#kaseorhmbl .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#kaseorhmbl .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#kaseorhmbl .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#kaseorhmbl .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#kaseorhmbl .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#kaseorhmbl .gt_indent_5 {\n  text-indent: 25px;\n}\n\n#kaseorhmbl .katex-display {\n  display: inline-flex !important;\n  margin-bottom: 0.75em !important;\n}\n\n#kaseorhmbl div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {\n  height: 0px !important;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"Column\">Column</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"Description\">Description</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"Column\" class=\"gt_row gt_left\">entity_id</td>\n<td headers=\"Description\" class=\"gt_row gt_left\">Unique sequential identifier for each extracted entity.</td></tr>\n    <tr><td headers=\"Column\" class=\"gt_row gt_left\">doc_id</td>\n<td headers=\"Description\" class=\"gt_row gt_left\">Name or ID of the source document (e.g., radiology report file).</td></tr>\n    <tr><td headers=\"Column\" class=\"gt_row gt_left\">sent_id</td>\n<td headers=\"Description\" class=\"gt_row gt_left\">Sentence number within the document where the entity appears.</td></tr>\n    <tr><td headers=\"Column\" class=\"gt_row gt_left\">entity_text</td>\n<td headers=\"Description\" class=\"gt_row gt_left\">Exact phrase matched from the report text (e.g., consolidation, pleural effusion).</td></tr>\n    <tr><td headers=\"Column\" class=\"gt_row gt_left\">entity_type</td>\n<td headers=\"Description\" class=\"gt_row gt_left\">Category of the term — either Anatomy or Observation.</td></tr>\n    <tr><td headers=\"Column\" class=\"gt_row gt_left\">certainty</td>\n<td headers=\"Description\" class=\"gt_row gt_left\">Contextual interpretation derived from nearby linguistic cues: present, absent, or uncertain.</td></tr>\n    <tr><td headers=\"Column\" class=\"gt_row gt_left\">start_char</td>\n<td headers=\"Description\" class=\"gt_row gt_left\">Starting character position of the entity in the original text.</td></tr>\n    <tr><td headers=\"Column\" class=\"gt_row gt_left\">end_char</td>\n<td headers=\"Description\" class=\"gt_row gt_left\">Ending character position of the entity in the original text.</td></tr>\n  </tbody>\n  \n</table>\n</div>\n```\n\n:::\n:::\n\n\nFor example, the report in @tbl-example below: \n\n“No focal consolidation is seen. \nThere is no pleural effusion or pneumothorax. \nThe cardiac and mediastinal silhouettes are unremarkable.”\n\n\n::: {#tbl-example .cell tbl-cap='Example report extraction'}\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"yxaifyjlur\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#yxaifyjlur table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#yxaifyjlur thead, #yxaifyjlur tbody, #yxaifyjlur tfoot, #yxaifyjlur tr, #yxaifyjlur td, #yxaifyjlur th {\n  border-style: none;\n}\n\n#yxaifyjlur p {\n  margin: 0;\n  padding: 0;\n}\n\n#yxaifyjlur .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#yxaifyjlur .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#yxaifyjlur .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#yxaifyjlur .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#yxaifyjlur .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#yxaifyjlur .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#yxaifyjlur .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#yxaifyjlur .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#yxaifyjlur .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#yxaifyjlur .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#yxaifyjlur .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#yxaifyjlur .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#yxaifyjlur .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#yxaifyjlur .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#yxaifyjlur .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#yxaifyjlur .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#yxaifyjlur .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#yxaifyjlur .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#yxaifyjlur .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#yxaifyjlur .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#yxaifyjlur .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#yxaifyjlur .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#yxaifyjlur .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#yxaifyjlur .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#yxaifyjlur .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#yxaifyjlur .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#yxaifyjlur .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#yxaifyjlur .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#yxaifyjlur .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#yxaifyjlur .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#yxaifyjlur .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#yxaifyjlur .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#yxaifyjlur .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#yxaifyjlur .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#yxaifyjlur .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#yxaifyjlur .gt_left {\n  text-align: left;\n}\n\n#yxaifyjlur .gt_center {\n  text-align: center;\n}\n\n#yxaifyjlur .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#yxaifyjlur .gt_font_normal {\n  font-weight: normal;\n}\n\n#yxaifyjlur .gt_font_bold {\n  font-weight: bold;\n}\n\n#yxaifyjlur .gt_font_italic {\n  font-style: italic;\n}\n\n#yxaifyjlur .gt_super {\n  font-size: 65%;\n}\n\n#yxaifyjlur .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#yxaifyjlur .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#yxaifyjlur .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#yxaifyjlur .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#yxaifyjlur .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#yxaifyjlur .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#yxaifyjlur .gt_indent_5 {\n  text-indent: 25px;\n}\n\n#yxaifyjlur .katex-display {\n  display: inline-flex !important;\n  margin-bottom: 0.75em !important;\n}\n\n#yxaifyjlur div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {\n  height: 0px !important;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"entity_text\">entity_text</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"entity_type\">entity_type</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"certainty\">certainty</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"entity_text\" class=\"gt_row gt_left\">consolidation</td>\n<td headers=\"entity_type\" class=\"gt_row gt_left\">Observation</td>\n<td headers=\"certainty\" class=\"gt_row gt_left\">absent</td></tr>\n    <tr><td headers=\"entity_text\" class=\"gt_row gt_left\">pleural effusion</td>\n<td headers=\"entity_type\" class=\"gt_row gt_left\">Observation</td>\n<td headers=\"certainty\" class=\"gt_row gt_left\">absent</td></tr>\n    <tr><td headers=\"entity_text\" class=\"gt_row gt_left\">pneumothorax</td>\n<td headers=\"entity_type\" class=\"gt_row gt_left\">Observation</td>\n<td headers=\"certainty\" class=\"gt_row gt_left\">absent</td></tr>\n  </tbody>\n  \n</table>\n</div>\n```\n\n:::\n:::\n\n\nThis confirmed the contextual logic was functioning as intended the algorithm recognised the mentions but correctly classified them as absent.\n\n## Handling complexity and edge cases\n\nDesigning a rule-based system is not without trade-offs. \nRadiology language can be subtle: phrases such as “cannot exclude pneumonia” or “features may represent atelectasis” require careful scope handling. \nI incorporated both pre- and post-modifiers to ensure flexibility, but there remain limitations around nested clauses (“no change in the previous pneumothorax”) and conditional statements (“if present, may represent infection”). \nThese could be addressed later with dependency parsing or a hybrid model, but the goal here was to stay lightweight and interpretable something any NHS analyst could audit and understand. \nAnother consideration was sentence boundary detection. \nI used the stringi package to identify sentence offsets, which preserves character indices for later reconciliation with structured EHR tables. \nThis proved more reliable than tokenisers that lose positional information.\n\n## Performance and scalability\n\nBecause this workflow uses only base R and string-processing libraries (stringr, stringi, dplyr), it scales linearly with text length and can comfortably process tens of thousands of reports on a standard NHS laptop. \nThere are no GPU or internet requirements, which makes it ideal for hospital-based servers where outbound connections are restricted.\n\nWhile models like spaCy or transformer-based approaches such as BioBERT can achieve higher recall on complex linguistic patterns, they require substantial infrastructure and often cannot run in the secure NHS network environment. \nThis workflow therefore fills a critical niche: interpretable, deployable, and compliant.\n\n## Integration possibilities\n\nThe structured output from this method essentially a long table of findings with certainty labels can feed into SQL databases, Power BI dashboards, or R Shiny apps. \nFor example, analysts could summarise all radiology mentions of pneumonia marked as “present” across an entire hospital trust, or measure how often “pleural effusion” was reported in specific cohorts. \nThe same pattern could also be adapted to ambulance ePCR narratives, mental-health crisis notes, or pathology reports.\n\n## Code availability\n\nFull code is publicly available in my GitHub account and accessible via this link: https://github.com/bashir-abubakar/radiology-nlp-r",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}