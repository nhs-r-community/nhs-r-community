<?xml version="1.0" encoding="UTF-8"?>
<rss  xmlns:atom="http://www.w3.org/2005/Atom" 
      xmlns:media="http://search.yahoo.com/mrss/" 
      xmlns:content="http://purl.org/rss/1.0/modules/content/" 
      xmlns:dc="http://purl.org/dc/elements/1.1/" 
      version="2.0">
<channel>
<title>NHS-R Community Quarto website</title>
<link>https://nhsrcommunity.com/blog/</link>
<atom:link href="https://nhsrcommunity.com/blog/index.xml" rel="self" type="application/rss+xml"/>
<description>Blogs are submitted from NHS-R Community members.&lt;br&gt;
</description>
<generator>quarto-1.8.25</generator>
<lastBuildDate>Tue, 09 Sep 2025 00:00:00 GMT</lastBuildDate>
<item>
  <title>Positron for Product Owners</title>
  <link>https://nhsrcommunity.com/blog/positron_for_product.html</link>
  <description><![CDATA[ 


<!-- source: https://github.com/gadenbuie/garrickadenbuie-com/blob/main/_partials/title-block-link-buttons/title-block.html -->
<!--
<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
-->
<!-- <header id="title-block-header" class="quarto-title-block default page-columns"> -->
<!-- <div class="quarto-title page-columns page-full featured-image p-4" style="background-image: url(featured.png), url(featured.jpg), url(../featured.jpg);"> -->



<p><img src="https://nhsrcommunity.com/blog/img/PST-Blog-PositronforProductOwners-A.jpg" class="img-fluid" alt="A data scientist working and an inset of the Positron IDE"></p>
<p>The clever cookies at Posit (creators of RStudio) recently released Positron, their new ‘next generation’ integrated development environment (IDE), after 2+ years of development. This software is multilingual, and will look familiar to those who have used VSCode in the past. It has been created to build upon the successes of RStudio for statistical computing and graphics, to create a seamless workflow for the development of data science projects. It’s a lovely piece of software that I’ve recently started working with and is providing me with some useful features to help in my role as a product owner. I wanted to give a little round-up of what I’ve found useful with it so far, for someone whose daily tasks differ from standard data science or analysis (but includes elements of both).</p>
<p>Firstly, what do I mean by a ‘product owner’? I’ll keep this brief since there is already so much out there that eloquently <a href="https://www.scrum.org/resources/what-is-a-product-owner">describes this role</a> and its relationship with others in the <a href="https://agilealliance.org/agile101/">Agile</a> universe. Essentially, my job is to ensure our data science team is building the right thing, at the right time, for our customers.<br>
The data science team’s time is spent marshalling their wizardry (as it seems to me) to write code, create packages, and curate workflows to meet the requirements for the tasks at hand. My job is to make sure those tasks are the right ones for meeting customer needs. This involves a lot of thinking about stakeholder requirements, translating them to a prioritised list of tools or functionality elements that will truly answer their questions, gathering and assessing user feedback, improving the user experience, and trying to find the sweet spot where the time, money and effort spent on development is appropriate for the value of the new thing for the customer.</p>
<p>I’m a data scientist myself, with a background in R and Python. I love writing code and building R packages and have done so in RStudio for some time now. A product owner’s working week is more focused on planning, prioritising, prioritising again, thinking about processes, documenting decisions and so forth.<br>
But to contribute to our team’s work I also write little bits of code, write documentation, create diagrams and infographics, undertake some QA, review PRs and so forth. Positron has made many of these elements easy and smooth. Here’s a round-up of the ways Positron is helping me with the day job:</p>
<section id="curating-the-product-backlog" class="level2">
<h2 class="anchored" data-anchor-id="curating-the-product-backlog">Curating the product backlog</h2>
<p>This is probably my favourite thing about Positron. The GitHub interface in RStudio was ok, but I still found myself using the command line, which felt like it interrupted my flow of work to a degree. Positron provides for the ability to never have to leave the IDE. Once you have authenticated your GitHub account in Positron, you can click the GitHub icon in the activity panel to see all the pull requests and issues for that repo. You can create PRs from that menu too – it’s all self-explanatory and works really well. Clicking on one of your repo issues will also open it as an additional tab in the editor pane, and you can interact with it there just as you would at github.com! No need to have browsers and shells open, it’s all just there. This helps my workflow massively, allowing me to keep my train of thought going.</p>
<p><img src="https://nhsrcommunity.com/blog/img/image1-391x1024.png" class="img-fluid" alt="Screenshot of the Positron IDE Source Control panel" width="300"></p>
</section>
<section id="writing-plans-and-processes-and-sharing-them" class="level2">
<h2 class="anchored" data-anchor-id="writing-plans-and-processes-and-sharing-them">Writing plans and processes and sharing them</h2>
<p>Quarto, which is already bilingual, is the tool I use to write meeting notes, lists and plans, all within a locally version-controlled Quarto book. The whole book is searchable, so it’s easy to find the notes I’m looking for, and Positron makes working with Quarto very easy. Positron comes with a bootstrapped Quarto extension and the CLI is bundled with Positron, so no extra setup is needed. I can create my planning documents, with nice mermaid flow diagrams and such, and I can publish them easily from Positron to share with my team. I’ve written a package that I can use within the IDE to automatically append notes to any of the .qmd pages of my notes book. I can even create diagrams and charts in the IDE, and save them into my notes. If the diagram is complex, I can append the code chunks and output to my book too, since that’s what Quarto is great at.</p>
<p><img src="https://nhsrcommunity.com/blog/img/image2.png" class="img-fluid" alt="Screenshot of the Positron IDE showing a Quarto document"></p>
<p>I love Positron’s feature that allows scrolling back through the iterations of a plot too, which makes rolling the code back to a preferred solution nice and simple.</p>
<p><img src="https://nhsrcommunity.com/blog/img/image3.png" class="img-fluid" alt="Screenshot of the Positron IDE plotting pane"></p>
</section>
<section id="testing-new-functionality-and-ux" class="level2">
<h2 class="anchored" data-anchor-id="testing-new-functionality-and-ux">Testing new functionality and UX</h2>
<p>I need to understand how our products are experienced by our users, so it helps me to run our apps in development locally. Using Positron allows me to use a very similar workflow to my familiar RStudio one, including using {devtools} for documenting and running package checks and using devtools::load_all() to test out new functionality locally. In addition to this, Positron makes working with tests really simple (which is saying something coming from me!). The ‘testing’ icon in the activity pane opens a dedicated interface sidebar, which neatly displays your tests and their results (provided you are in a package folder). It lets you easily rerun failing tests, see their error messages, and rerun batches of tests or all tests at once. This is a really great addition to the IDE.</p>
<p><img src="https://nhsrcommunity.com/blog/img/image4.png" class="img-fluid" alt="Screenshot of the Positron IDE testing pane" width="300"></p>
</section>
<section id="juggling-many-projects" class="level2">
<h2 class="anchored" data-anchor-id="juggling-many-projects">Juggling many projects</h2>
<p>I flit between projects often. Double-clicking the R Project file allows you to start a new RStudio session with the project already loaded. But there is no direct equivalent of the .Rproj file for Positron.<br>
This is a little jarring at first, but opening a folder to begin working in a project is a familiar workflow with VSCode.<br>
I wanted a quick and easy way to switch between projects, and have found the Project Manager Extension useful for this. It creates a new multi-folder icon in the activity pane, which when clicked gives a neat overview of saved projects (folders), which I can tag easily to bundle together related projects. Lovely!</p>
<p><img src="https://nhsrcommunity.com/blog/img/image5.jpg" class="img-fluid" alt="Screenshot of the Positron IDE Extension Marketplace" width="300"></p>
</section>
<section id="helpers-for-doing-good-data-science" class="level2">
<h2 class="anchored" data-anchor-id="helpers-for-doing-good-data-science">Helpers for doing good data science</h2>
<p>I don’t want to lose my skills as a data scientist; I like to dabble and make useful tools for myself, and very occasionally I get my hands dirty writing code with the team. Positron is helping me write better code, quickly, which helps me look like a data scientist (I hope!). My favourite features so far are having my code formatted automatically when I save an R or Quarto file by the excellent Air formatter (shipped as standard with Positron), using <a href="https://positron.posit.co/migrate-rstudio-code.html#r-snippets">code snippets</a> to get the syntax of common functions right first time, and the cool multi-cursor for editing in multiple places at once!</p>
<p><img src="https://nhsrcommunity.com/blog/img/image6.png" class="img-fluid" alt="Screenshot of the Positron settings.json file"></p>
<p><img src="https://nhsrcommunity.com/blog/img/Untitled-design.gif" class="img-fluid" alt="Animation showing the use of multicursor functionality" width="300"></p>
<p>Overall, Positron feels like a nice place to be. I’m finding it to be an IDE that helps with so many aspects of being a product owner, and that can only help us to keep building the right thing at the right time.</p>


</section>

<a onclick="window.scrollTo(0, 0); return false;" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Back to top</a><div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-reuse"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div class="quarto-appendix-contents"><div><a rel="license" href="https://creativecommons.org/publicdomain/zero/1.0/">CC0 1.0</a></div></div></section></div> ]]></description>
  <category>R</category>
  <category>Positron</category>
  <category>Git</category>
  <guid>https://nhsrcommunity.com/blog/positron_for_product.html</guid>
  <pubDate>Tue, 09 Sep 2025 00:00:00 GMT</pubDate>
</item>
<item>
  <title>Predictive Analytics within healthcare - XG Boost models for inpatient fall risk predictions</title>
  <dc:creator>Joseph Mosley</dc:creator>
  <link>https://nhsrcommunity.com/blog/Predictive_Analytics_Within_Healthcare-XGBoost.html</link>
  <description><![CDATA[ <!-- source: https://github.com/gadenbuie/garrickadenbuie-com/blob/main/_partials/title-block-link-buttons/title-block.html --><!--
<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
--><!-- <header id="title-block-header" class="quarto-title-block default page-columns"> --><!-- <div class="quarto-title page-columns page-full featured-image p-4" style="background-image: url(featured.png), url(featured.jpg), url(../featured.jpg);"> --><section id="introduction" class="level2"><h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>Hi! This blog post acts as a follow up to my previous entry to the NHS-R Community website, regarding the use of <a href="https://nhsrcommunity.com/blog/predictive-analytics.html">random forest models to predict a patient’s length of stay</a>. This time, the aim was to classify a patient as either “at risk” or “not at risk” of falling as an inpatient, utilising the XG Boost technology available within R. The classification depended on a variety of predictor variables, agreed with a senior digital nursing colleague working within the same acute trust as me. The intention behind this project was to see how accurately a patient could be classified into a fall risk category, using the agreed predictor variables. The goals and proposed methodology of this project were established after discussions with the previously mentioned senior digital nursing colleague, in which we set out to determine what the most appropriate way to approach this task would be regarding a clinical perspective, variable selection and potential clinical use cases. The accuracy of the eventually completed model was assessed through predictions on a testing data set, where the model was used to classify patients as either at risk of falling or not. This prediction was then compared with the actual fact of whether each specific patient did experience a fall during their inpatient spell or not. The testing data set for this accuracy assessment was a section of the primary data set used for this project, as the primary data set was split into both a training and testing section.</p>
<p>As mentioned within my previous predictive analytics post (linked above), this blog post is not intended to be a comprehensive guide on how to approach a machine learning task within R, best practice for utilising XG Boost or a complete overview of all of the relevant considerations necessary for such a project. This blog post is intended to act as an overview of how I approached this specific project, that hopefully potential readers might find interesting. The considerations and methods discussed within this blog post are specific to the context of this project only. If you are thinking about undertaking a similar machine learning project, you should seek the relevant guidance to do so.</p>
</section><section id="data-set-preparation-and-variable-selection" class="level2"><h2 class="anchored" data-anchor-id="data-set-preparation-and-variable-selection">Data Set Preparation and Variable Selection</h2>
<p>For this project, the variables used were discussed with the previously mentioned senior digital nursing colleague prior to the development and testing of the model. The features were chosen as it was thought that they would act as ideal predictor variables for whether or not an inpatient may experience a fall. The final predictor variables used in the model were as follows, “Sex”, “Non-Elective Stay”, “Dementia Diagnosis”, “Current Delirium”, “Parkinson’s Diagnosis”, “Current Low Blood Pressure”, “Previous Fall Flag” and “Age Category”. A positive to using these particular variables was that they were all readily available in internal electronic patient record systems.</p>
<div class="callout callout-style-simple callout-note">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-body-container">
<p>While these predictor variables were the final ones utilised within this model, they were not the only ones considered from the start of the project. This is discussed in more detail later, within the section “Performance and Challenges”.</p>
</div>
</div>
</div>
<p>In order to transform and clean this data into an appropriate format, a SQL query was used to retrieve all of the relevant fields from the necessary electronic patient record systems and wrangle this into the data set that would eventually be used in the project. Next, this data was saved as a CSV file and used to train the model within the primary R script.</p>
<p>As the input for this specific model needed to be numeric, “one hot encoding” was once again used to create a numeric column for each value within the categorical variables. This encoding was performed within the R script itself.</p>
</section><section id="model-creation" class="level2"><h2 class="anchored" data-anchor-id="model-creation">Model Creation</h2>
<p>This model was created in R using the following packages, “tidyverse”, “xgboost” and “caret”. The primary data set was initially imported into R as a CSV, this file is referred to in the example script below as “CSV File”. The data was then encoded using the function “dummyVars”, with any irrelevant columns then removed. For this project, the data was split into a training section containing 70% of the initial data and a testing section containing 30% of the initial data.</p>
<p>Following this, the optimal number of rounds and the maximum depth of the model were established. This was done through gradual adjustments to each of these values, with improvements and drops in performance and prediction quality noted. In the example script provided below, “x” would be replaced by the depth and “y” would be replaced by the number of rounds. Once the model was trained, the accuracy and recall was then assessed through a confusion matrix. As this was a heavily imbalanced data set, where a much larger proportion of patients did not experience a fall compared to those that did, the threshold for classification needed to be altered from the default value in order to receive meaningful and useful predictions. Within the example script, “t” would be replaced by the specific threshold value determined to be optimal for classification. For this project, the threshold was eventually decided through a process of gradual alterations, with improvements and drops within the accuracy and recall scores of the model noted.</p>
<div class="callout callout-style-simple callout-warning">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-body-container">
<p>As mentioned within my previous predictive analytics post, I established a seed within the R script using the set.seed() function, in order to ensure that the results were reproducible.</p>
</div>
</div>
</div>
<p>The example script showing how this project was approached within R is shown below.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb1" style="background: #f1f3f5;"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#LOAD LIBRARIES</span></span>
<span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;"><a href="https://github.com/dmlc/xgboost">xgboost</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> </span>
<span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;"><a href="https://github.com/topepo/caret/">caret</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> </span>
<span></span>
<span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#SET SEED SO THAT RESULTS ARE REPRODUCIBLE</span></span>
<span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">200</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span></span>
<span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#IMPORT DATA</span></span>
<span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">Results</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/utils/read.table.html">read.csv</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"CSV File"</span>, header<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">T</span>, stringsAsFactors<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">T</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span></span>
<span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#CHECK INITIAL DATA</span></span>
<span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">glimpse</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">Results</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span></span>
<span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#ENCODE DATA</span></span>
<span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">dmy</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">dummyVars</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">" ~ ."</span>, data <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">Results</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span></span>
<span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">encoded_data</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/stats/predict.html">predict</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">dmy</span>, newdata <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">Results</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span></span>
<span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">encoded_data</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">Fall.Y</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/factor.html">as.factor</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">encoded_data</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">Fall.Y</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span></span>
<span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">formatted_data</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/subset.html">subset</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">encoded_data</span>, select <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">Fall.N</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span></span>
<span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#CHECK FORMATTED DATA</span></span>
<span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">glimpse</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">formatted_data</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span></span>
<span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#DATA SPLIT INTO TRAINING (70%) AND TESTING (30%)</span></span>
<span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">parts</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">createDataPartition</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">formatted_data</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">Fall.Y</span>, p <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.7</span>, list <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">F</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">train</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">formatted_data</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">[</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">parts</span>, <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">]</span></span>
<span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">test</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">formatted_data</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">[</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">parts</span>, <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">]</span></span>
<span></span>
<span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#PREDICTOR AND RESPONSE - TRAINING</span></span>
<span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">train_x</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/data.matrix.html">data.matrix</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">train</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">[</span>, <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">21</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">]</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">train_y</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/data.matrix.html">data.matrix</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">train</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">[</span>,<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">21</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">]</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span></span>
<span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#PREDICTOR AND RESPONSE - TESTING</span></span>
<span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">test_x</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/data.matrix.html">data.matrix</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">test</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">[</span>, <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">21</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">]</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">test_y</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/data.matrix.html">data.matrix</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">test</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">[</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">21</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">]</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span></span>
<span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#FINAL TRAINING AND TESTING</span></span>
<span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">xgb_train</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">xgb.DMatrix</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span>data <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">train_x</span>, label <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">train_y</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">xgb_test</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">xgb.DMatrix</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span>data <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">test_x</span>, label <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">test_y</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span></span>
<span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#SAMPLE MODEL</span></span>
<span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#X WOULD BE THE MAXIMUM DEPTH</span></span>
<span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#Y WOULD BE THE NUMBER OF ROUNDS</span></span>
<span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">depth</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">x</span></span>
<span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">rounds</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">y</span></span>
<span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">final</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">xgboost</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span>data <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">xgb_train</span>, max.depth <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">depth</span>, nrounds <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">rounds</span>, verbose <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, objective<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'binary:logistic'</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span></span>
<span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#MAKE FINAL PREDICTIONS ON TEST DATA</span></span>
<span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">pred_test</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/stats/predict.html">predict</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">final</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">xgb_test</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span></span>
<span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#ASSESS ACCURACY</span></span>
<span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#T WOULD BE THE IDEAL THRESHOLD FOR CLASSIFICATION, DETERMINED AFTER TESTING</span></span>
<span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">threshold</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">t</span></span>
<span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">a</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/factor.html">as.factor</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">test_y</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">b</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/factor.html">as.factor</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">if_else</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">pred_test</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">threshold</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span></span>
<span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">CONFUSION_MATRIX</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span>Test_Value <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">a</span>, Prediction_Value <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">b</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">CONFUSION_MATRIX</span></span></code></pre></div></div>
</div>
</section><section id="performance-and-challenges" class="level2"><h2 class="anchored" data-anchor-id="performance-and-challenges">Performance and Challenges</h2>
<p>As the data set behind this model was quite heavily imbalanced, one of the solutions used to attempt to overcome this was to manually alter the balance of the training section of the data set through “oversampling” and “undersampling”. While this did result in reasonably high accuracy scores, it is believed that an unintended consequence of this was that “overfitting” took place. This conclusion was reached as predictions in testing were not generally in line with what was expected, despite the reasonably high accuracy scores. Due to this, the original data set balance was used, with a lowered threshold for classification (as previously mentioned). One of the key variables believed to have contributed to the overfitting issue was age, when used in a continuous, numeric format. Performance was generally better when age was altered to present as a categorical field, for example, 0-18 rather than a specific numeric value. While the issue of overfitting seemed to be a lot less prevalent by the end of the project, as predictions were more consistent with what would be expected, it is important to note that this does not mean there was absolutely no overfitting present within the model still.</p>
<p>As previously mentioned, certain variables originally considered were eventually removed from the data set and not included within the final version of the model. This is because they were determined to generally not be good predictor variables within the context of this specific data set and model. They may have actually been hindering the overall performance of the model. The variables removed were “Current Dizziness”, “Current Elevated Heart Rate”, “Current Visual Impairment” and “Current Incontinence”. While these variables were determined to not be good predictors within this particular project, they could still potentially be useful within another setting and context for the same purpose of predicting fall risk.</p>
<p>For the variables utilised within the final model, a chart is shown below visualising the feature importance of all those still included. The plot was created using the package “ggplot2”. The R script for this plot is also shown below, the script presumes that the model has already been created, as the model “final” from the previous script shown is referenced.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb2" style="background: #f1f3f5;"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#LOAD LIBRARIES</span></span>
<span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;"><a href="https://ggplot2.tidyverse.org">ggplot2</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span></span>
<span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#FEATURE IMPORTANCE</span></span>
<span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">model_feature_importance</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">xgb.importance</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span>model <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">final</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">model_feature_importance</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">model_feature_importance</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">arrange</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">desc</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">Gain</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span></span>
<span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#FEATURE IMPORTANT PLOT - GGPLOT2</span></span>
<span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">model_feature_importance</span>, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span>x <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/stats/reorder.factor.html">reorder</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">Feature</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">Gain</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>, y <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">Gain</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_bar</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span>stat <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"identity"</span>, fill <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"red"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">coord_flip</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span>title <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Feature Importance (Gain) Within Model"</span>, x <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Variable"</span>, y <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Feature Importance"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_light</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span></code></pre></div></div>
</div>
<p><strong>Plot Of Feature Importance</strong></p>
<p><img src="https://nhsrcommunity.com/blog/img/Feature_Importance.png" class="img-fluid" width="492"></p>
<p>The performance of the XG Boost model was compared with a Logistic Regression model and a Random Forest model, both also created in R using the same data set. Overall, the XG Boost model seemingly returned a better accuracy and gave higher quality predictions with this specific data set than either of the other classification methods.</p>
<p>As an inpatient fall could be considered to be rather awkward to predict, in that multiple patients that did not fall could theoretically be admitted with the exact same values as a patient that did fall, a goal of achieving an overall accuracy and recall score of 70% was set for this specific project. Precision, while very important for some projects, was not deemed to be a priority over recall and overall accuracy for this specific project. This is because the impact of a false positive (being a patient predicted to fall that did not actually fall) would be more acceptable in the context of this project than a false negative (being a patient that did fall but was predicted not to). The final accuracy score for this project was 69.39%, while the recall score was 67.83%.</p>
</section><section id="interactivity-for-users" class="level2"><h2 class="anchored" data-anchor-id="interactivity-for-users">Interactivity For Users</h2>
<p>Similarly to the previously mentioned Random Forest prediction project, it was thought that users would need a way to simply interact with the model to input values and receive their predictions. For this, I created a shiny app that would allow users to utilise check boxes to input the various predictor values for a hypothetical patient. The app would then produce a fall risk classification based on these predictor values using the model. In theory, this app would be hosted and accessed internally within a trust, for relevant staff to use for predictions. Below, a screenshot is shown of an example of the final output of the app based on the predictor values entered. In this case, the model predicted that the patient would be a fall risk.</p>
<p><strong>Screenshot Of App</strong></p>
<p><img src="https://nhsrcommunity.com/blog/img/App.png" class="img-fluid" width="300"></p>
</section><section id="considerations-and-notes" class="level2"><h2 class="anchored" data-anchor-id="considerations-and-notes">Considerations and Notes</h2>
<p>. If such a model were to ever be used for clinical purposes, it would require further validation to absolutely ensure that the performance was to a high standard and that predictions were meaningful. As previously mentioned, there may have still been overfitting present within the final version of this model, even if this was to a lesser extent than it would have otherwise been if the relevant corrections and amendments had not been made.</p>
<p>. While I opted to use an XG Boost model created specifically within R for this project, it should be noted that alternative classification methods and other tech stacks could have also been used to develop a similar model.</p>
<p>. When utilising patient data for such a model, there are obvious information governance considerations necessary. The data set used to create this model was limited to only variables that were utilised for predictions, no unnecessary information was extracted. Additionally, this data was wrangled, stored and analysed on the trust’s internal network only.</p>
<p>. My role within my organisation is not explicitly that of a “Data Scientist” or primarily a machine learning focused role, my current title is “Information Development Analyst”. While I have a keen interest in R, machine learning and the potential applications of this within the NHS, <strong><em>I am definitely not an authority</em></strong> in this area of healthcare analytics. The methods used for this undertaking are specific to the goals and context of this project only. If you are considering creating something similar within your own organisation, you should seek the relevant guidance to do so.</p>
<p>. Once the age variable had been altered to present in a categorical format, rather than as a continuous numeric value, it may have been more appropriate to utilise “ordinal encoding” rather than “one hot encoding” for this specific variable. However, a version of the model was created with this applied as an alternative and this did not appear to impact the performance of the model. Nevertheless, I plan to eventually create a second version of the model with this considered, along with more recent data included, as the time period for admissions within the data set used for this project was the 1st January 2021 - 31st December 2024.</p>
<p>. Throughout this blog post, I have continually referred to a senior digital nursing colleague who had valuable input into this project from a clinical perspective, particularly for considering potential clinical use cases and initial variable selection. Thanks Hannah for your contribution to this project!</p>
</section><section id="final-thoughts" class="level2"><h2 class="anchored" data-anchor-id="final-thoughts">Final Thoughts</h2>
<p>Thank you for taking the time to read this post! I hope you have found it as interesting as I found undertaking the project itself.</p>
<p>There are certainly untapped applications for prediction models, similar to the one described in this post, to be created and implemented throughout the NHS and healthcare analytics more generally for a variety of clinical and non-clinical use cases. Some organisations may already have large amounts of resources dedicated to the development and implementation of internal prediction models, while others may not have started to explore the possibilities and potential benefits of this yet. Each organisation looking to implement predictive analytics would likely benefit in unique ways, depending on where attention and resources were focused. Wherever these models are implemented, it is obviously imperative that they are done so with care and extensively checked before they are allowed to influence any potential decisions within a healthcare organisation. As this technology has become more accessible through open source tech stacks (such as R and Python) and more digestible through the increased availability of online resources, I am personally excited to see any further developments, particularly within the NHS and wider healthcare space.</p>


</section><a onclick="window.scrollTo(0, 0); return false;" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Back to top</a><div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-reuse"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div class="quarto-appendix-contents"><div><a rel="license" href="https://creativecommons.org/publicdomain/zero/1.0/">CC0 1.0</a></div></div></section></div> ]]></description>
  <category>Predictive Analytics</category>
  <category>Machine Learning</category>
  <guid>https://nhsrcommunity.com/blog/Predictive_Analytics_Within_Healthcare-XGBoost.html</guid>
  <pubDate>Sat, 14 Jun 2025 00:00:00 GMT</pubDate>
  <media:content url="https://nhsrcommunity.com/blog/img/preview.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>The importance of community in NHS data science</title>
  <dc:creator>Claire Welsh</dc:creator>
  <link>https://nhsrcommunity.com/blog/Community_in_data_science.html</link>
  <description><![CDATA[ 


<!-- source: https://github.com/gadenbuie/garrickadenbuie-com/blob/main/_partials/title-block-link-buttons/title-block.html -->
<!--
<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
-->
<!-- <header id="title-block-header" class="quarto-title-block default page-columns"> -->
<!-- <div class="quarto-title page-columns page-full featured-image p-4" style="background-image: url(featured.png), url(featured.jpg), url(../featured.jpg);"> -->



<p>I was alerted to the news of NHS England’s fate by my phone pinging a news app alert to me mid-meeting.<br>
I try to avoid such distractions, but for obvious reasons this one caught my eye.<br>
For a moment I was incredulous. “That’s not what they mean, surely. I mean, they can’t, can they?!”.</p>
<p>I joined the NHS much more recently than most of my colleagues, but I started by joining an organisation that had barely begun to settle into its new home in NHS Digital before the announcement came that we’d be moving into NHS England.<br>
NDRS, my previous team, had been part of Public Health England, which was disbanded during the pandemic.<br>
I loved that job but left late last year to pursue my current role in The Strategy Unit.<br>
Therefore, the recent news left me feeling a mix of vertigo and deep exhaustion on behalf of my ex-colleagues for having to undergo such big change again, along with relief that I’d left when I did (plus a good dose of guilt for feeling relieved).</p>
<p>I joined the NHS, as so many of us did, because I need to feel a sense of genuine impact from my work. We’re surrounded by evidence of need: long waiting lists, chronic diseases, burned-out clinical staff, growing populations, desperate inequalities and terrifying headlines. We have what we need to fix these issues. We really do. Thousands of motivated, caring, skilled medical staff, mind-bending amounts of world-class health data, and the modern tools that can squeeze every drop of truth and value from those data. But NHS data and computing tools are useless without energetic and skilful analysts and data scientists.</p>
<p>Medicine is an evidence-based profession. With something as important as our health and lives, we cannot rely on guesswork, assumptions, or our biases. We look to data to answer the big questions. But we ask these questions because we feel empathy for patients and their families. I’m worried that the analytical workforce we rely upon to do a lot of the hard work of turning data into better health outcomes, are themselves in need of empathy right now.</p>
<p>Organisational change is very disruptive, time consuming, and exhausting. Those who are now fearing for their jobs may be feeling undervalued and vulnerable. I can’t comment on the necessity of the government’s choice, as its very far above my pay grade.<br>
But I am confident that many colleagues in analytics and data science would benefit from a sense of community and mutual support.</p>
<p>Since 2018, the NHS-R community has been a friendly, values-led group of NHS (plus public sector and more) employees intent on doing the best thing for patients with the best data, in the best way.<br>
The community has supported analytics and data science by providing training, resources and crucially, positive spaces to talk, share problems, swap tips and revel in the magic of coding. It’s all delightfully nerdy. The community has also received a good deal of recognition for its efforts, including this from the 2022 <a href="https://www.gov.uk/government/publications/better-broader-safer-using-health-data-for-research-and-analysis/better-broader-safer-using-health-data-for-research-and-analysis">Goldacre review</a>:</p>
<p><em>“The NHS-R community – with its welcoming and supportive ethos – provides an excellent entry point for those looking to begin learning the benefits of working with modern, open and collaborative data science tools, and those looking to further develop their skills by accessing the expertise in the community.”</em></p>
<p>Through the community’s Slack group, and the direct links to other community members I have forged through it, I’ve been able to chat, commiserate, vent, argue and de-stress with like-minded colleagues from across the NHS. I hugely value this, and I know many others do too. Feeling supported and included is a human need, and when work can be tough, leaning into these types of communities can offer genuine positivity and relief.</p>
<p>So, my advice to anyone in the NHS or wider public sector, who codes or aspires to, for health and care analysis, is to join the community. Make use of it. Post questions in the <a href="https://nhsrcommunity.slack.com/">Slack</a>. Come along to <a href="https://nhsrway.nhsrcommunity.com/community-handbook.html">Coffee and Code</a>. Read our <a href="https://nhsrcommunity.com/blog/">blogs</a>. Give yourself the space to use our resources to fall down an interesting <a href="https://github.com/nhs-r-community">rabbit hole or two</a>. Reach out to community members, offer support to others. Be <a href="https://nhsrcommunity.com/get-involved.html">part of NHS-R</a>. The wonderful nerdy content is fantastic, but community is the real point.</p>



<a onclick="window.scrollTo(0, 0); return false;" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Back to top</a><div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-reuse"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div class="quarto-appendix-contents"><div><a rel="license" href="https://creativecommons.org/publicdomain/zero/1.0/">CC0 1.0</a></div></div></section></div> ]]></description>
  <category>NHS-R</category>
  <guid>https://nhsrcommunity.com/blog/Community_in_data_science.html</guid>
  <pubDate>Mon, 31 Mar 2025 00:00:00 GMT</pubDate>
  <media:content url="https://nhsrcommunity.com/blog/img/WOCinTech.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>Predictive Analytics within healthcare - Random Forest models for predicting length of stay</title>
  <dc:creator>Joseph Mosley</dc:creator>
  <link>https://nhsrcommunity.com/blog/predictive-analytics.html</link>
  <description><![CDATA[ <!-- source: https://github.com/gadenbuie/garrickadenbuie-com/blob/main/_partials/title-block-link-buttons/title-block.html --><!--
<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
--><!-- <header id="title-block-header" class="quarto-title-block default page-columns"> --><!-- <div class="quarto-title page-columns page-full featured-image p-4" style="background-image: url(featured.png), url(featured.jpg), url(../featured.jpg);"> --><section id="introduction" class="level2"><h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>Hi! This is my first blog post here and I’m excited to have the chance to share my thoughts with you on this topic, as it is something that has seemingly exploded in popularity over the last few years. For context, I currently work as an “Information Development Analyst” within an acute NHS trust. So naturally, I’m constantly exploring new ways of working within healthcare analytics and business intelligence, as well as aspects of data and technology that I might just think are interesting! This post specifically focuses on predictive analytics within R and my journey developing a prediction model within my organisation.</p>
<p>Machine learning for predictive analytics is becoming increasingly popular (and essential) throughout healthcare, particularly within the NHS. Machine learning models within healthcare can be successfully deployed for a variety of use cases. This area of healthcare analytics is constantly growing as new techniques become more prevalent and machine learning resources become more accessible to information professionals based within NHS organisations. While some of these solutions are deployed on a large scale and require the investment of an abundance of time and money, smaller scale models can often be developed in-house, taking advantage of the wide array of tools that R has on offer for machine learning. In this example, I will show how I developed a random forest model to predict whether or not a patient’s length of stay was going to be less than (&lt;) or greater-than or equal-to (&gt;=) 7 days. The data used to train such a model would be available for most data analysts within the NHS through their trust’s internal electronic patient record systems.</p>
<p>The code shown for this particular machine learning task is specific to the context and model discussed in this blog post. This is not a comprehensive guide on how to approach a machine learning task within R or a complete overview of all the relevant considerations necessary. While I hope that readers find this post interesting, anyone considering undertaking something similar should seek the relevant guidance to do so.</p>
<div class="callout callout-style-simple callout-note callout-empty-content callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>The objective of this model is to classify whether or not a patient’s length of stay will be &lt; or &gt;= 7 days, rather than predicting the exact number of days!
</div>
</div>
<div class="callout-body-container callout-body">

</div>
</div>
</section><section id="data-set-preparation-variable-selection" class="level2"><h2 class="anchored" data-anchor-id="data-set-preparation-variable-selection">Data Set Preparation &amp; Variable Selection</h2>
<p>The variables used in the data set to train the model were selected as it was thought they would be useful as indicators for a patient’s length of stay. These included age, elective / non-elective admission, whether the patient was admitted from a nursing home or not, theatre records, the patient’s sepsis status and the presence of particular comorbidities (that is previous diagnosis of dementia, chronic obstructive pulmonary disease, heart failure and diabetes).</p>
<p>To allow the model to be trained on this data, all of the categorical variables had to be re-categorised using “one hot encoding”, where the values of each of these variables would then be represented in a separate column identified with a 1 or a 0. This alteration allows the input into the model to be numeric. As only categorical variables needed to be encoded, age did not need to be altered.</p>
<div class="callout callout-style-simple callout-note callout-empty-content callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>For example Instead of the comorbidity columns stating “Yes” or “No” for each condition, this would be represented with separate columns. These columns would state whether the patient had each relevant diagnosis with a 1 for true and 0 for false.
</div>
</div>
<div class="callout-body-container callout-body">

</div>
</div>
</section><section id="preparation-of-model" class="level2"><h2 class="anchored" data-anchor-id="preparation-of-model">Preparation Of Model</h2>
<p>The R script used to prepare and evaluate this model utilised the following packages: “stats”, “dplyr” and “randomForest”. Initially, the data set was loaded into R from a CSV file and the columns checked (for example formatting and column names). In this example, the CSV file is referred to as “DATASET”. Following this, the data set is split into a testing section and a training section. For this I opted for a split of 70% training and 30% testing. Then, the random forest model is built, specifying that the field “Length.Of.Stay” is the variable I am looking to predict and that I want to make this prediction based on all of the other variables available in the data set. Lastly, the model accuracy is evaluated through a confusion matrix. This model presents an accuracy of 85.11%, when evaluating the predictions made from the testing data set.</p>
<div class="callout callout-style-simple callout-caution callout-empty-content callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Caution</span>In this case, set.seed(x) is important in order to make your results reproducible. If a different seed number was used to re-train the model, your final accuracy score may differ, even though the same data set was used for training.
</div>
</div>
<div class="callout-body-container callout-body">

</div>
</div>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb1" style="background: #f1f3f5;"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># load packages</span></span>
<span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">stats</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;"><a href="https://www.stat.berkeley.edu/~breiman/RandomForests/">randomForest</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span></span>
<span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># set seed</span></span>
<span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span></span>
<span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># dataset preparation</span></span>
<span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">Results</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/utils/read.table.html">read.csv</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"DATASET"</span>, header <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>, stringsAsFactors <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span></span>
<span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># check dataset</span></span>
<span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">Results</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span></span>
<span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># split data into testing and training</span></span>
<span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">index</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/sample.html">sample</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">Results</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>, replace <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>, prob <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.7</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.3</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span></span>
<span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># training</span></span>
<span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">Training</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">Results</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">[</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">index</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">]</span></span>
<span></span>
<span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># testing</span></span>
<span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">Testing</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">Results</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">[</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">index</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">]</span></span>
<span></span>
<span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># build model</span></span>
<span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">MODEL</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">randomForest</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">Length.Of.Stay</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">.</span>, data <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">Training</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span></span>
<span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># evaluate model accuracy through a confusion matrix</span></span>
<span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">LOS_Pred</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/stats/predict.html">predict</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">MODEL</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">Testing</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">Testing</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">LOS_Pred</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">LOS_Pred</span></span>
<span></span>
<span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">CONFUSION_MATRIX</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">Testing</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">Length.Of.Stay</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">Testing</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">LOS_Pred</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span></span>
<span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">ACCURACY</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/diag.html">diag</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">CONFUSION_MATRIX</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">CONFUSION_MATRIX</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">ACCURACY</span></span></code></pre></div></div>
</div>
</section><section id="interactivity-for-users" class="level2"><h2 class="anchored" data-anchor-id="interactivity-for-users">Interactivity For Users</h2>
<p>Once the model has been created and evaluated for usability, you may want to start thinking about potential methods to make the model accessible within your organisation. Ideally, a user would be able to input values for each variable into the model in as minimal clicks as possible. In this case, I experimented with a shiny application that would likely be the best way for users to input values into the model to receive a prediction.</p>
<p>However, it would not be ideal for the user to have to go through clinical notes and various systems to find the information they need for every variable. The solution arrived at for this issue was that a table would be created in SQL containing all of the relevant information for each variable, for any patients that have been admitted on the trust’s primary electronic patient record system. The relevant information for all of the variables would then be retrieved from various systems. This would be entirely managed within SQL. The data from SQL would be retrieved for use in R with the “odbc” package. In the example shown below, the table that contains a regularly updated feed of daily admissions is referred to as “[Database].[dbo].[Table]”.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb2" style="background: #f1f3f5;"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># load package</span></span>
<span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;"><a href="https://odbc.r-dbi.org">odbc</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span></span>
<span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># connect to sql via odbc</span></span>
<span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">myDSN</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"LOCAL_DSN_NAME"</span></span>
<span></span>
<span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># define query</span></span>
<span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">con</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">dbConnect</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">odbc</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">odbc</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>, dsn <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">myDSN</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span></span>
<span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># define query</span></span>
<span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">MyQuery</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"SELECT * FROM [Database].[dbo].[Table]"</span></span>
<span></span>
<span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># run sql query</span></span>
<span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">sql_result</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">dbGetQuery</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">con</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">MyQuery</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span></code></pre></div></div>
</div>
<p>Below, two examples are shown of test data inputted into the shiny app, one returning a prediction of “0-6 Days” and one returning a prediction of “7(+) Days”.</p>
<p><strong>0-6 Days</strong></p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="https://nhsrcommunity.com/blog/img/prediction-tool-less-7-days.jpg" class="img-fluid quarto-figure quarto-figure-center figure-img" alt="Screenshot of length of stay prediction tool input box with prediction less than 7"></p>
</figure>
</div>
<p><strong>7(+) Days</strong></p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="https://nhsrcommunity.com/blog/img/prediction-tool-7-days.png" class="img-fluid quarto-figure quarto-figure-center figure-img" alt="Screenshot of length of stay prediction tool input box with prediction of 7 or more days"></p>
</figure>
</div>
</section><section id="considerations" class="level2"><h2 class="anchored" data-anchor-id="considerations">Considerations</h2>
<p>Hosting for shiny applications is not currently widely available outside of public facing solutions, which would obviously not be appropriate for something such as this (that is information governance concerns).</p>
<p>Other machine learning model types available in R, such a “logistic regression” or “XGBoost” could have also been applied here for classification, as an alternative to random forest.</p>
<p>An NHS organisation may have developed similar machine learning models using alternative methods, such as python rather than R.</p>
</section><section id="final-thoughts" class="level2"><h2 class="anchored" data-anchor-id="final-thoughts">Final Thoughts</h2>
<p>If you are working within business intelligence or data analytics within a healthcare space, you have likely encountered some form of machine learning tool, whether this is something you have developed yourself or made use of from a third-party application. It’s important to acknowledge that there are different scales of how far a machine learning model can be implemented within an organisation. How far an NHS trust integrates such technology may entirely depend on their IT infrastructure, budget and resources. However, the machine learning tools available in R certainly lower the barriers to entry if an organisation did wish to incorporate these methods into their analytics. Lastly, while the technology for projects such as this has certainly become more accessible, the time and consideration regarding variable selection, model testing and performance evaluation is still fundamental for a model to be accurate in its predictions and therefore useful from an operational perspective.</p>
<p>Thank you for taking the time to read this. Hopefully you found this interesting (and potentially even useful)!</p>
<p><a href="https://st5.depositphotos.com/68501920/65007/i/450/depositphotos_650073840-stock-photo-minimal-marketing-strategy-concept-business.jpg">Image</a> from Stock Photos, Royalty Free Laptop with analytics Images | Depositphotos</p>


</section><a onclick="window.scrollTo(0, 0); return false;" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Back to top</a><div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-reuse"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div class="quarto-appendix-contents"><div><a rel="license" href="https://creativecommons.org/publicdomain/zero/1.0/">CC0 1.0</a></div></div></section></div> ]]></description>
  <category>Predictive Analytics</category>
  <category>Machine Learning</category>
  <category>dplyr</category>
  <category>SQL</category>
  <guid>https://nhsrcommunity.com/blog/predictive-analytics.html</guid>
  <pubDate>Thu, 27 Feb 2025 00:00:00 GMT</pubDate>
  <media:content url="https://nhsrcommunity.com/blog/img/computer-with-analytics.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>NHS-R Community GitHub Actions - spelling</title>
  <dc:creator>Zoë Turner</dc:creator>
  <link>https://nhsrcommunity.com/blog/github-action-spelling-check.html</link>
  <description><![CDATA[ <!-- source: https://github.com/gadenbuie/garrickadenbuie-com/blob/main/_partials/title-block-link-buttons/title-block.html --><!--
<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
--><!-- <header id="title-block-header" class="quarto-title-block default page-columns"> --><!-- <div class="quarto-title page-columns page-full featured-image p-4" style="background-image: url(featured.png), url(featured.jpg), url(../featured.jpg);"> --><p>Spell checking can be a really important feature of coding, particularly when creating reports, dashboards or websites. Some R solutions have spelling checks built into them, for example RStudio has a spell check function in the IDE (with underlining words that aren’t recognised in the Visual view) and <a href="https://github.com/ThinkR-open/golem"><code>Golem</code></a> (“a framework for building robust Shiny apps”) has the <code>spelling</code> R package built into it. But when you are creating reports at a fast pace or building dashboards in flexdashboards, Shiny or Quarto, then mistakes may get missed. Spelling, being what it is, can also be incredibly hard to spot: a dropped letter or a switch can be easily overlooked and if you have several files to check you will need a quick and reliable way to do this.</p>
<section id="github-actions" class="level2"><h2 class="anchored" data-anchor-id="github-actions">GitHub actions</h2>
<p>GitHub actions work, as the name suggests, on GitHub and are stored in the folder <code>.github</code> at the root (the main folder) of the Project. When a Pull Request is made to the main branch, which is good practice, you can trigger actions to flag up issues to resolve before merging.</p>
<p>Whilst it is possible to create GitHub actions using R, Python is a more usual language, particularly in places like the GitHub Marketplace which is where the <a href="https://github.com/marketplace/actions/run-pyspelling-as-a-github-action">PySpelling</a> can be found.</p>
<p>The <a href="https://github.com/nhs-r-community/NHSR-way/tree/main/.github/workflows">NHS-R Way</a> was one of the first repositories I tried out this GitHub Action and I needed 3 files:</p>
<ul>
<li>.wordlist.txt (in the main folder)</li>
<li>.spellcheck.yaml (in the main folder)</li>
<li>and in the folder <code>.github/workflows/</code> the file <code>spellcheck.yml</code>
</li>
</ul>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Hidden files
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<p>Files starting with a <code>.</code> may be hidden from view and can be seen in File Explorer by going to View &gt; select Hidden items. However, even doing this may not mean the file shows in the RStudio Files pane.</p>
</div>
</div>
</div>
<p>All the files can be copied without changes but the <code>.wordlist.txt</code> requires specific spellings so you may wish to remove some or all of those used in NHS-R Community in case some of the words added are not suitable for your Project.</p>
</section><section id="running-the-github-action-to-find-spellings-to-save" class="level2"><h2 class="anchored" data-anchor-id="running-the-github-action-to-find-spellings-to-save">Running the GitHub Action to find spellings to save</h2>
<p>Adding the three files will undoubtedly fail the GitHub Action when first pushed because it’s likely you will have a spelling that is not recognised by a universal dictionary. Also the checks are case sensitive so if you have any references which change from upper to lower case, these will both need to be listed, like NHS and nhs.</p>
<p>It is possible to expand the <a href="https://github.com/nhs-r-community/nhs-r-community/actions" title="NHS-R Community website GitHub Actions page">GitHub Action page</a> on GitHub to view the log of previously run actions and you will need to do this when it fails. For the spelling GitHub action, each spelling “mistake” is shown between lines of dashes:</p>
<pre><code>--------------------------------------------------------------------------------
NHSRpopulation
--------------------------------------------------------------------------------</code></pre>
<p>I initially searched for the <code>-----</code> lines using Ctrl+F through the browser but it turns out the search doesn’t extend to the log. I had missed that the log has its own search which appears at the top of the log webpage.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="https://nhsrcommunity.com/blog/img/search-action-log.PNG" class="img-fluid quarto-figure quarto-figure-center figure-img" alt="GitHub Action with search towards the right where I had searched multiple dashes"></p>
</figure>
</div>
<p>It’s then a manual task going to the <code>wordlist.txt</code> and adding the words and if there are true spelling mistakes it’s possible to search all files in RStudio by using the <code>Ctrl + Shift + F</code> rather than the <code>Ctrl + F</code> to locate the spelling mistake and correct it.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-2-contents" aria-controls="callout-2" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Failed GitHub Actions
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-2" class="callout-2-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<p>Even when a GitHub Action fails the Pull Request can still be accepted.</p>
<p>Sometimes GitHub Actions fail and just need rerunning some time later!</p>
<p>To rerun go to the Actions tab, select the last failed action and in the top right will be a button to select <code>Re-run all jobs</code> or <code>Re-fun failed jobs</code>.</p>
</div>
</div>
</div>
</section><section id="forcing-commits-on-github" class="level2"><h2 class="anchored" data-anchor-id="forcing-commits-on-github">Forcing commits on GitHub</h2>
<p>It’s possible to see on the <a href="https://github.com/nhs-r-community/nhs-r-community/pull/278">Pull Request</a> that there are multiple <code>force-pushed</code> commits (10 times!). Because there were so many spellings I did this in a few tries, adding a load, pushing the changes and re-running the action. I also was adding them in alphabetical order at first, until I realised I was never going to get through all of these before Christmas (and it’s February!).</p>
<p>On the one hand it’s ok to push all the changes to one commit as they are all related but on the other hand you will see this commit has 121 file changes to it as I had to tidy up a few files (see the later section about a rogue apostrophe). Whilst this was a decision that is ok to make: which is worse, more commits or more file changes, it is <strong>never</strong> recommended to force push to <code>main</code> or a branch that people are collaborating on because it changes history by changing the commit label. As I was working on a branch and within in Pull Request to <code>main</code>, I’ve reasonably assumed that it’s only me that will be affected by these changes.</p>
<p>The code to force a push is as follows:</p>
<ul>
<li>stage (add) all files (note the dot)</li>
<li>amend the previous commit</li>
<li>force the push</li>
</ul>
<pre><code>git add . 
git commit --amend --no-edit
git push -f</code></pre>
</section><section id="updating-a-wordlist-dictionary-with-multiple-words" class="level2"><h2 class="anchored" data-anchor-id="updating-a-wordlist-dictionary-with-multiple-words">Updating a wordlist dictionary with multiple words</h2>
<p>The NHS-R Community website had over 900 specific words to add (some were generated from weblinks) and when I (finally) looked for code to speed things up I realised I could just add all the spellings into the list as I found them, import into R to order and remove duplicates. Before importing and sorting just add <code>Header</code> or something similar to the top of the word list as this will become the column name and removed as part of the process.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb3" style="background: #f1f3f5;"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;"><a href="https://here.r-lib.org/">here</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># a package which is useful for referring to the project's path</span></span>
<span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span></span>
<span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">file_path</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">here</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">here</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"/.wordlist.txt"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span></span>
<span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Check to see if the file exists (I misspelt this originally as .worldlist so </span></span>
<span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ironically couldn't find the file!)</span></span>
<span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/files.html">file.exists</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">file_path</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span></span>
<span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Import the .txt file into R as a dataframe</span></span>
<span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">df</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">readr</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">read_delim</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">file_path</span>, delim <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"\t"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span></span>
<span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Order and remove duplicates</span></span>
<span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">df2</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">df</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">dplyr</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">arrange</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">Header</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/unique.html">unique</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> </span>
<span>  </span>
<span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Write the text file to test.txt, copy over to .wordlist.txt if everything is ok</span></span>
<span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># or change the file name to .wordlist.txt and overwrite the original </span></span>
<span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/utils/write.table.html">write.table</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">df2</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"test.txt"</span>, </span>
<span>            sep <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"/"</span>,</span>
<span>            col.names <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span>, </span>
<span>            row.names <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span>,</span>
<span>            quote <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span></code></pre></div></div>
</div>
</section><section id="replacing-multiple-and-non-ascii-characters" class="level2"><h2 class="anchored" data-anchor-id="replacing-multiple-and-non-ascii-characters">Replacing multiple and non-ascii characters</h2>
<p>Copying over the files from WordPress brought across the <code>’</code> apostrophe which doesn’t appear to get recognised correctly even when the same is used in the <code>.wordlist</code> so I used the following code from a <a href="https://gist.github.com/mattjbayly/9c56ec80ae291ff00589ffa3440806a1">Gist</a> to find and replace it to <code>'</code> in multiple files. The only change I made to the Gist was to expand on the <code>list.files</code> base R function to change the pattern to find<code>.qmd</code> files and also show the full path because I was changing files in a subfolder (doing this means that the code to <code><a href="https://rdrr.io/r/base/getwd.html">setwd()</a></code> isn’t necessary):</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb4" style="background: #f1f3f5;"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;"><a href="https://here.r-lib.org/">here</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># use instead of setwd() to show the file path rather than change it</span></span>
<span></span>
<span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">path_to_subfolder</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">here</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">here</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"/blog"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span></span>
<span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/list.files.html">list.files</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">path_to_subfolder</span>, pattern <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">".qmd"</span>, full.names <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span></code></pre></div></div>
</div>
</section><section id="conclusion" class="level2"><h2 class="anchored" data-anchor-id="conclusion">Conclusion</h2>
<p>You can go a very long time without needing to use GitHub Actions or even spell checks on your scripts but they can be really convenient and powerful bits of code that can speed up a possibly manual process.</p>


</section><a onclick="window.scrollTo(0, 0); return false;" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Back to top</a><div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-reuse"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div class="quarto-appendix-contents"><div><a rel="license" href="https://creativecommons.org/publicdomain/zero/1.0/">CC0 1.0</a></div></div></section></div> ]]></description>
  <category>GitHub Action</category>
  <guid>https://nhsrcommunity.com/blog/github-action-spelling-check.html</guid>
  <pubDate>Fri, 14 Feb 2025 00:00:00 GMT</pubDate>
</item>
<item>
  <title>Creating synthetic data using the synthpop package</title>
  <link>https://nhsrcommunity.com/blog/create-synthetic-data.html</link>
  <description><![CDATA[ <!-- source: https://github.com/gadenbuie/garrickadenbuie-com/blob/main/_partials/title-block-link-buttons/title-block.html --><!--
<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
--><!-- <header id="title-block-header" class="quarto-title-block default page-columns"> --><!-- <div class="quarto-title page-columns page-full featured-image p-4" style="background-image: url(featured.png), url(featured.jpg), url(../featured.jpg);"> --><p>This blog was originally a vignette in the NHSRdatasets package and refers to the <a href="https://nhs-r-community.github.io/NHSRdatasets/articles/synthetic_news_data.html">synthetic data in that package</a> for NEWS (National Early Warning Score).</p>
<section id="what-is-synthetic-data" class="level2"><h2 class="anchored" data-anchor-id="what-is-synthetic-data">What is Synthetic data?</h2>
<p>The goal is to generate a data set which contains no real units, therefore safe for public release and retains the structure of the data.</p>
<p>In other words, one can say that synthetic data contains all the characteristics of original data minus the sensitive content.</p>
<p>Synthetic data is generally made to validate mathematical models. This data is used to compare the behaviour of the real data against the one generated by the model.</p>
</section><section id="how-we-generate-synthetic-data" class="level2"><h2 class="anchored" data-anchor-id="how-we-generate-synthetic-data">How we generate synthetic data?</h2>
<p>The principle is to observe real-world statistic distributions from the original data and reproduce fake data by drawing simple numbers.</p>
<p>Consider a data set with <img src="https://latex.codecogs.com/png.latex?p"> variables. In a nutshell, synthesis follows these steps:</p>
<ol type="1">
<li>Take a simple random sample of <img src="https://latex.codecogs.com/png.latex?x_%7B1,obs%7D"> and set as <img src="https://latex.codecogs.com/png.latex?x_%7B1,syn%7D">
</li>
<li>Fit model <img src="https://latex.codecogs.com/png.latex?f(x_%7B2,obs%7D%7Cx_%7B1,obs%7D)"> and draw <img src="https://latex.codecogs.com/png.latex?x_%7B2,syn%7D"> from <img src="https://latex.codecogs.com/png.latex?f(x_%7B2,syn%7D%7Cx_%7B1,syn%7D)">
</li>
<li>Fit model <img src="https://latex.codecogs.com/png.latex?f(x_%7B3,obs%7D%7Cx_%7B1,obs%7D,x_%7B2,obs%7D)"> and draw <img src="https://latex.codecogs.com/png.latex?x_%7B3,syn%7D"> from <img src="https://latex.codecogs.com/png.latex?f(x_%7B3,syn%7D%7Cx_%7B1,syn%7D,x_%7B2,syn%7D)">
</li>
<li>And so on, until <img src="https://latex.codecogs.com/png.latex?f(x_%7Bp,syn%7D%7Cx_%7B1,syn%7D,x_%7B2,syn%7D,...,x_%7Bp-1,syn%7D)">
</li>
</ol>
<p>Fitting statistical models to the original data and generating completely new records for public release. Joint distribution <img src="https://latex.codecogs.com/png.latex?f(x_1,x_2,x_3,%E2%80%A6,x_p)"> is approximated by a set of conditional distributions <img src="https://latex.codecogs.com/png.latex?f(x_2%7Cx_1)">.</p>
</section><section id="synthetic-data-generation---national-early-warning-score-news-utilising-real-data" class="level2"><h2 class="anchored" data-anchor-id="synthetic-data-generation---national-early-warning-score-news-utilising-real-data">Synthetic data generation - National early warning score (NEWS) utilising real data</h2>
<p>The data this is based on is the <a href="https://www.rcplondon.ac.uk/projects/outputs/national-early-warning-score-news-2">NEWS</a> Score devised by the Royal College of Physicians.</p>
<p>Synthetic data can be generated from new data, utilising the above methodology, on the real observed data:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb1" style="background: #f1f3f5;"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;"><a href="https://readr.tidyverse.org">readr</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">df</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/warning.html">suppressWarnings</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">read_csv</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"https://raw.githubusercontent.com/StatsGary/SyntheticNEWSData/main/observed_news_data.csv"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">dplyr</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">everything</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>, <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">X1</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span></span>
<span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">glimpse</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">df</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span></code></pre></div></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 1,000
Columns: 12
$ male  &lt;dbl&gt; 0, 1, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 1, 0, 1, 0, 0, 1…
$ age   &lt;dbl&gt; 68, 94, 85, 44, 77, 58, 25, 69, 91, 70, 87, 93, 61, 75, 97, 80, …
$ NEWS  &lt;dbl&gt; 3, 1, 0, 0, 1, 1, 4, 0, 1, 1, 7, 2, 5, 1, 1, 3, 1, 5, 0, 2, 1, 2…
$ syst  &lt;dbl&gt; 150, 145, 169, 154, 122, 146, 65, 116, 162, 132, 110, 166, 123, …
$ dias  &lt;dbl&gt; 98, 67, 69, 106, 67, 106, 42, 56, 72, 96, 85, 90, 78, 80, 72, 81…
$ temp  &lt;dbl&gt; 36.8, 35.0, 36.2, 36.9, 36.4, 35.3, 35.6, 37.2, 35.5, 35.3, 37.0…
$ pulse &lt;dbl&gt; 78, 62, 54, 80, 62, 73, 72, 90, 60, 67, 95, 87, 93, 65, 89, 145,…
$ resp  &lt;dbl&gt; 26, 18, 18, 17, 20, 20, 12, 16, 16, 16, 24, 16, 26, 12, 16, 16, …
$ sat   &lt;dbl&gt; 96, 96, 96, 96, 95, 98, 99, 97, 99, 97, 87, 95, 96, 96, 98, 99, …
$ sup   &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0…
$ alert &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…
$ died  &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…</code></pre>
</div>
</div>
<p>This reads in the observed NEWS data from the GitHub repository. Now, we will utilise the <code>synthpop</code> package to create a synthetically generated dataset.</p>
</section><section id="generating-synthetic-news-dataset-using-synthpop-package" class="level2"><h2 class="anchored" data-anchor-id="generating-synthetic-news-dataset-using-synthpop-package">Generating synthetic NEWS dataset using synthpop package</h2>
<p>As stated, now we will use the real observed data and generate a synthetic set, utilising the equations and process mapped out in the preceding sections:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb3" style="background: #f1f3f5;"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">synthpop</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">syn_df</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">syn</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">df</span>, seed <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">4321</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span></code></pre></div></div>
<div class="cell-output cell-output-stdout">
<pre><code>Warning: In your synthesis there are numeric variables with 5 or fewer levels: male, sup, alert, died.
Consider changing them to factors. You can do it using parameter 'minnumlevels'.

Synthesis
-----------
 male age NEWS syst dias temp pulse resp sat sup
 alert died</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb5" style="background: #f1f3f5;"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#### synthetic data</span></span>
<span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">synthetic_news_data</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">syn_df</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">syn</span></span>
<span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">glimpse</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">synthetic_news_data</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span></code></pre></div></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 1,000
Columns: 12
$ male  &lt;dbl&gt; 1, 1, 0, 1, 1, 0, 0, 1, 1, 1, 0, 1, 0, 0, 1, 0, 1, 0, 0, 1, 0, 1…
$ age   &lt;dbl&gt; 56, 50, 74, 56, 52, 21, 37, 81, 67, 67, 56, 48, 76, 57, 43, 58, …
$ NEWS  &lt;dbl&gt; 1, 2, 6, 1, 0, 2, 1, 2, 5, 0, 1, 1, 0, 1, 1, 1, 1, 1, 3, 0, 1, 6…
$ syst  &lt;dbl&gt; 126, 115, 143, 122, 153, 164, 101, 125, 182, 160, 142, 122, 132,…
$ dias  &lt;dbl&gt; 84, 84, 86, 60, 89, 92, 57, 74, 103, 80, 113, 71, 59, 71, 89, 11…
$ temp  &lt;dbl&gt; 35.7, 36.8, 36.5, 36.3, 36.2, 35.5, 35.6, 36.6, 37.1, 36.2, 35.3…
$ pulse &lt;dbl&gt; 72, 94, 82, 94, 78, 97, 76, 71, 95, 86, 73, 62, 88, 70, 63, 100,…
$ resp  &lt;dbl&gt; 17, 14, 21, 12, 12, 20, 15, 17, 18, 18, 18, 16, 19, 16, 18, 18, …
$ sat   &lt;dbl&gt; 98, 97, 93, 98, 96, 99, 98, 97, 94, 98, 98, 100, 99, 97, 97, 96,…
$ sup   &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1…
$ alert &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…
$ died  &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0…</code></pre>
</div>
</div>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb7" style="background: #f1f3f5;"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;"><a href="https://ggplot2.tidyverse.org">ggplot2</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Create temperature tibbles to compare observed vs synthetically generated labels</span></span>
<span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">obs</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tibble</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span>label <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"observed_data"</span>, value <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">df</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">temp</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">synth</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tibble</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span>label <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"synthetic_data"</span>, value <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">synthetic_news_data</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">temp</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span></span>
<span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Merge the frames together to get a comparison</span></span>
<span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">merged</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">obs</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">bind_rows</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">synth</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span></span>
<span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Create the plot</span></span>
<span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">plot</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">merged</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">value</span>, fill <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">label</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_histogram</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span>alpha <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.9</span>, position <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"identity"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_minimal</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_fill_manual</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span>values <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#BCBDC1"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#2061AC"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>    title <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Observed vs Synthetically NEWS values"</span>,</span>
<span>    subtitle <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Based on NEWS Temperature score"</span>,</span>
<span>    x <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"NEWS Temperature Score"</span>, y <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Score frequency"</span></span>
<span>  <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span>legend.position <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"none"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span></span>
<span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">plot</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span></code></pre></div></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="https://nhsrcommunity.com/blog/create-synthetic-data_files/figure-html/visuals-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>


</section><a onclick="window.scrollTo(0, 0); return false;" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Back to top</a><div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-reuse"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div class="quarto-appendix-contents"><div><a rel="license" href="https://creativecommons.org/publicdomain/zero/1.0/">CC0 1.0</a></div></div></section></div> ]]></description>
  <category>Data</category>
  <guid>https://nhsrcommunity.com/blog/create-synthetic-data.html</guid>
  <pubDate>Tue, 01 Oct 2024 00:00:00 GMT</pubDate>
  <media:content url="https://nhsrcommunity.com/blog/img/natural-bricks.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>CQC directory data vignette</title>
  <dc:creator>Martine Wauben</dc:creator>
  <link>https://nhsrcommunity.com/blog/cqc-data.html</link>
  <description><![CDATA[ <!-- source: https://github.com/gadenbuie/garrickadenbuie-com/blob/main/_partials/title-block-link-buttons/title-block.html --><!--
<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
--><!-- <header id="title-block-header" class="quarto-title-block default page-columns"> --><!-- <div class="quarto-title page-columns page-full featured-image p-4" style="background-image: url(featured.png), url(featured.jpg), url(../featured.jpg);"> --><p>The following was submitted to the NHSRdatasets package in 2020 but was too big as data to be accepted by the package (CRAN has size limits). However, the vignette that accompanied the data may be of interest and so is copied here as a blog. The data is also pulled from the GitHub Pull Request.</p>
<section id="cqc-directory" class="level2"><h2 class="anchored" data-anchor-id="cqc-directory">CQC Directory</h2>
<p>This vignette explains how to use the <code>cqc_load</code> dataset in R, and also details where it comes from and how it is generated.</p>
<p>The data is sourced from <a href="https://www.cqc.org.uk/about-us/transparency/using-cqc-data">the Care Quality Commission</a> and its archive is available on <a href="https://drive.google.com/drive/folders/1Y6V6r-q2l4lJYKuZL0DXw25VDUTH6L4N">Google Drive</a>.</p>
<p>The data contains care provider locations and ratings as published monthly in 2019.</p>
<p>The dataset contains data on locations and providers:</p>
<ul>
<li>
<strong>location</strong>: location ID, name, ODS code, telephone number, web address, sector, inspection directorate, region, local authority, CCG, street address, parliamentary constituency, and coordinates.</li>
<li>
<strong>provider</strong>: provider ID, name, company/charity registration, telephone number, web address, sector, inspection directorate, region, local authority, street address, and parliamentary constituency. code for the organisation that this activity relates to</li>
<li>
<strong>pub_date</strong>: The date that particular data point was published</li>
</ul>
<p>First let’s load some packages and the dataset and show the first 10 rows of data.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Data location
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<p>The following code has had all references to the NHSRdatasets package removed as the data wasn’t added to it.</p>
</div>
</div>
</div>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb1" style="background: #f1f3f5;"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;"><a href="https://yihui.org/knitr/">knitr</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;"><a href="https://tidyr.tidyverse.org">tidyr</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;"><a href="https://ggplot2.tidyverse.org">ggplot2</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;"><a href="https://lubridate.tidyverse.org">lubridate</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;"><a href="https://magrittr.tidyverse.org">magrittr</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span></span>
<span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Although the data isn't in NHSRdatasets it can be downloaded from the Pull Request using this code</span></span>
<span></span>
<span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/load.html">load</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/connections.html">url</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"https://github.com/MHWauben/NHSRdatasets/raw/274688bc727e800d5c40f06f86be38f866167818/data/cqc_directory.rda"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span></span>
<span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># format for display</span></span>
<span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">cqc_load</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span>  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># show the first 10 rows</span></span>
<span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span>  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># format as a table</span></span>
<span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span></code></pre></div></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 0%">
<col style="width: 1%">
<col style="width: 0%">
<col style="width: 3%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 10%">
<col style="width: 4%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 2%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 2%">
<col style="width: 0%">
<col style="width: 1%">
<col style="width: 2%">
<col style="width: 1%">
<col style="width: 0%">
<col style="width: 2%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 0%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 0%">
</colgroup>
<thead><tr class="header">
<th style="text-align: left;">location_id</th>
<th style="text-align: left;">location_hsca_start_date</th>
<th style="text-align: left;">care_home</th>
<th style="text-align: left;">location_name</th>
<th style="text-align: left;">location_ods_code</th>
<th style="text-align: left;">location_telephone_number</th>
<th style="text-align: left;">registered_manager_note_where_there_is_more_than_one_manager_at_a_location_only_one_is_included_here_for_ease_of_presentation_the_full_list_is_available_if_required</th>
<th style="text-align: left;">location_web_address</th>
<th style="text-align: left;">care_homes_beds</th>
<th style="text-align: left;">location_type_sector</th>
<th style="text-align: left;">location_inspection_directorate</th>
<th style="text-align: left;">location_primary_inspection_category</th>
<th style="text-align: left;">location_latest_overall_rating</th>
<th style="text-align: left;">publication_date</th>
<th style="text-align: left;">location_region</th>
<th style="text-align: left;">location_local_authority</th>
<th style="text-align: left;">location_onspd_ccg_code</th>
<th style="text-align: left;">location_onspd_ccg</th>
<th style="text-align: left;">location_commissioning_ccg_code</th>
<th style="text-align: left;">location_commissioning_ccg</th>
<th style="text-align: left;">location_street_address</th>
<th style="text-align: left;">location_address_line_2</th>
<th style="text-align: left;">location_city</th>
<th style="text-align: left;">location_county</th>
<th style="text-align: left;">location_postal_code</th>
<th style="text-align: left;">location_latitude</th>
<th style="text-align: left;">location_longitude</th>
<th style="text-align: left;">location_parliamentary_constituency</th>
<th style="text-align: left;">brand_id</th>
<th style="text-align: left;">brand_name</th>
<th style="text-align: left;">provider_companies_house_number</th>
<th style="text-align: left;">provider_charity_number</th>
<th style="text-align: left;">provider_id</th>
<th style="text-align: left;">provider_name</th>
<th style="text-align: left;">provider_hsca_start_date</th>
<th style="text-align: left;">provider_type_sector</th>
<th style="text-align: left;">provider_inspection_directorate</th>
<th style="text-align: left;">provider_primary_inspection_category</th>
<th style="text-align: left;">provider_ownership_type</th>
<th style="text-align: left;">provider_telephone_number</th>
<th style="text-align: left;">provider_web_address</th>
<th style="text-align: left;">provider_street_address</th>
<th style="text-align: left;">provider_address_line_2</th>
<th style="text-align: left;">provider_city</th>
<th style="text-align: left;">provider_county</th>
<th style="text-align: left;">provider_postal_code</th>
<th style="text-align: left;">provider_local_authority</th>
<th style="text-align: left;">provider_region</th>
<th style="text-align: left;">provider_latitude</th>
<th style="text-align: left;">provider_longitude</th>
<th style="text-align: left;">provider_parliamentary_constituency</th>
<th style="text-align: left;">provider_nominated_individual_name</th>
<th style="text-align: left;">pub_date</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">1-1000210669</td>
<td style="text-align: left;">2013-12-12</td>
<td style="text-align: left;">Y</td>
<td style="text-align: left;">Kingswood House Nursing Home</td>
<td style="text-align: left;">VM4G6</td>
<td style="text-align: left;">01424716303</td>
<td style="text-align: left;">*</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">22</td>
<td style="text-align: left;">Social Care Org</td>
<td style="text-align: left;">Adult social care</td>
<td style="text-align: left;">Residential social care</td>
<td style="text-align: left;">Requires improvement</td>
<td style="text-align: left;">2018-08-04</td>
<td style="text-align: left;">South East</td>
<td style="text-align: left;">East Sussex</td>
<td style="text-align: left;">E38000076</td>
<td style="text-align: left;">NHS Hastings and Rother CCG</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">21-23 Chapel Park Road</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">St Leonards On Sea</td>
<td style="text-align: left;">East Sussex</td>
<td style="text-align: left;">TN37 6HR</td>
<td style="text-align: left;">50.857239</td>
<td style="text-align: left;">0.561998</td>
<td style="text-align: left;">Hastings and Rye</td>
<td style="text-align: left;">BD398</td>
<td style="text-align: left;">BRAND Innomary</td>
<td style="text-align: left;">08558638</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">1-877912132</td>
<td style="text-align: left;">Innowood Limited</td>
<td style="text-align: left;">2013-12-12</td>
<td style="text-align: left;">Social Care Org</td>
<td style="text-align: left;">Adult social care</td>
<td style="text-align: left;">Residential social care</td>
<td style="text-align: left;">Organisation</td>
<td style="text-align: left;">02089079713</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">62 Northwick Avenue</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">Harrow</td>
<td style="text-align: left;">Middlesex</td>
<td style="text-align: left;">HA3 0AB</td>
<td style="text-align: left;">Brent</td>
<td style="text-align: left;">London</td>
<td style="text-align: left;">51.579057</td>
<td style="text-align: left;">-0.320762</td>
<td style="text-align: left;">Brent North</td>
<td style="text-align: left;">Saluguti, Vikas</td>
<td style="text-align: left;">2019-01-01</td>
</tr>
<tr class="even">
<td style="text-align: left;">1-1000312641</td>
<td style="text-align: left;">2013-10-18</td>
<td style="text-align: left;">N</td>
<td style="text-align: left;">Human Support Group Limited - Sale</td>
<td style="text-align: left;">VN30H</td>
<td style="text-align: left;">01619429490</td>
<td style="text-align: left;">Buckley, Michelle</td>
<td style="text-align: left;">www.humansupportgroup.co.uk</td>
<td style="text-align: left;">0</td>
<td style="text-align: left;">Social Care Org</td>
<td style="text-align: left;">Adult social care</td>
<td style="text-align: left;">Community based adult social care services</td>
<td style="text-align: left;">Good</td>
<td style="text-align: left;">2018-11-17</td>
<td style="text-align: left;">North West</td>
<td style="text-align: left;">Trafford</td>
<td style="text-align: left;">E38000187</td>
<td style="text-align: left;">NHS Trafford CCG</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">59 Cross Street</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">Sale</td>
<td style="text-align: left;">Cheshire</td>
<td style="text-align: left;">M33 7HF</td>
<td style="text-align: left;">53.427726</td>
<td style="text-align: left;">-2.323301</td>
<td style="text-align: left;">Altrincham and Sale West</td>
<td style="text-align: left;">BD409</td>
<td style="text-align: left;">BRAND Human Support Group</td>
<td style="text-align: left;">03513906</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">1-101693918</td>
<td style="text-align: left;">The Human Support Group Limited</td>
<td style="text-align: left;">2010-10-01</td>
<td style="text-align: left;">Social Care Org</td>
<td style="text-align: left;">Adult social care</td>
<td style="text-align: left;">Community based adult social care services</td>
<td style="text-align: left;">Organisation</td>
<td style="text-align: left;">01619429487</td>
<td style="text-align: left;">www.humansupportgroup.co.uk</td>
<td style="text-align: left;">Craig House, 33 Ballbrook Avenue</td>
<td style="text-align: left;">Didsbury</td>
<td style="text-align: left;">Manchester</td>
<td style="text-align: left;">Lancashire</td>
<td style="text-align: left;">M20 3JG</td>
<td style="text-align: left;">Manchester</td>
<td style="text-align: left;">North West</td>
<td style="text-align: left;">53.425083</td>
<td style="text-align: left;">-2.235246</td>
<td style="text-align: left;">Manchester, Withington</td>
<td style="text-align: left;">Mason, Glen</td>
<td style="text-align: left;">2019-01-01</td>
</tr>
<tr class="odd">
<td style="text-align: left;">1-1000401911</td>
<td style="text-align: left;">2013-11-04</td>
<td style="text-align: left;">Y</td>
<td style="text-align: left;">Little Haven</td>
<td style="text-align: left;">VL05L</td>
<td style="text-align: left;">02086974246</td>
<td style="text-align: left;">Muriuki, Martin</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">15</td>
<td style="text-align: left;">Social Care Org</td>
<td style="text-align: left;">Adult social care</td>
<td style="text-align: left;">Residential social care</td>
<td style="text-align: left;">Good</td>
<td style="text-align: left;">2018-04-11</td>
<td style="text-align: left;">London</td>
<td style="text-align: left;">Lewisham</td>
<td style="text-align: left;">E38000098</td>
<td style="text-align: left;">NHS Lewisham CCG</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">133 Wellmeadow Road</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">London</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">SE6 1HP</td>
<td style="text-align: left;">51.441104</td>
<td style="text-align: left;">0.002335</td>
<td style="text-align: left;">Lewisham East</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">04174819</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">1-101666779</td>
<td style="text-align: left;">Elizabeth Peters Care Homes Limited</td>
<td style="text-align: left;">2010-10-01</td>
<td style="text-align: left;">Social Care Org</td>
<td style="text-align: left;">Adult social care</td>
<td style="text-align: left;">Residential social care</td>
<td style="text-align: left;">Organisation</td>
<td style="text-align: left;">02086985296</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">14 Canadian Avenue</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">London</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">SE6 3AS</td>
<td style="text-align: left;">Lewisham</td>
<td style="text-align: left;">London</td>
<td style="text-align: left;">51.440913</td>
<td style="text-align: left;">-0.02297</td>
<td style="text-align: left;">Lewisham East</td>
<td style="text-align: left;">Muriuki, Martin</td>
<td style="text-align: left;">2019-01-01</td>
</tr>
<tr class="even">
<td style="text-align: left;">1-1000587219</td>
<td style="text-align: left;">2013-11-04</td>
<td style="text-align: left;">Y</td>
<td style="text-align: left;">Highlands Borders Care Home</td>
<td style="text-align: left;">VM44K</td>
<td style="text-align: left;">01392491261</td>
<td style="text-align: left;">Martin, Fiona</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">18</td>
<td style="text-align: left;">Social Care Org</td>
<td style="text-align: left;">Adult social care</td>
<td style="text-align: left;">Residential social care</td>
<td style="text-align: left;">Good</td>
<td style="text-align: left;">2017-07-20</td>
<td style="text-align: left;">South West</td>
<td style="text-align: left;">Devon</td>
<td style="text-align: left;">E38000129</td>
<td style="text-align: left;">NHS Northern, Eastern and Western Devon CCG</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">22 Salutary Mount</td>
<td style="text-align: left;">Heavitree</td>
<td style="text-align: left;">Exeter</td>
<td style="text-align: left;">Devon</td>
<td style="text-align: left;">EX1 2QE</td>
<td style="text-align: left;">50.721541</td>
<td style="text-align: left;">-3.508053</td>
<td style="text-align: left;">Exeter</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">06612312</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">1-101693962</td>
<td style="text-align: left;">Highlands Care Home Limited</td>
<td style="text-align: left;">2010-10-01</td>
<td style="text-align: left;">Social Care Org</td>
<td style="text-align: left;">Adult social care</td>
<td style="text-align: left;">Residential social care</td>
<td style="text-align: left;">Organisation</td>
<td style="text-align: left;">01392431122</td>
<td style="text-align: left;">www.highlandscarehome.co.uk</td>
<td style="text-align: left;">56 St Leonards Road</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">Exeter</td>
<td style="text-align: left;">Devon</td>
<td style="text-align: left;">EX2 4LS</td>
<td style="text-align: left;">Devon</td>
<td style="text-align: left;">South West</td>
<td style="text-align: left;">50.718254</td>
<td style="text-align: left;">-3.521576</td>
<td style="text-align: left;">Exeter</td>
<td style="text-align: left;">Zhang, Danadanqi</td>
<td style="text-align: left;">2019-01-01</td>
</tr>
<tr class="odd">
<td style="text-align: left;">1-1000711804</td>
<td style="text-align: left;">2013-12-12</td>
<td style="text-align: left;">Y</td>
<td style="text-align: left;">Belmont Grange Nursing and Residential Home</td>
<td style="text-align: left;">VM4GQ</td>
<td style="text-align: left;">01913849853</td>
<td style="text-align: left;">Urwin, Kelly-Ann</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">30</td>
<td style="text-align: left;">Social Care Org</td>
<td style="text-align: left;">Adult social care</td>
<td style="text-align: left;">Residential social care</td>
<td style="text-align: left;">Good</td>
<td style="text-align: left;">2017-03-01</td>
<td style="text-align: left;">North East</td>
<td style="text-align: left;">County Durham</td>
<td style="text-align: left;">E38000116</td>
<td style="text-align: left;">NHS North Durham CCG</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">Broomside Lane</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">Durham</td>
<td style="text-align: left;">County Durham</td>
<td style="text-align: left;">DH1 2QW</td>
<td style="text-align: left;">54.786148</td>
<td style="text-align: left;">-1.52816</td>
<td style="text-align: left;">City of Durham</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">07470626</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">1-241243645</td>
<td style="text-align: left;">Perfect Care Limited</td>
<td style="text-align: left;">2011-10-05</td>
<td style="text-align: left;">Social Care Org</td>
<td style="text-align: left;">Adult social care</td>
<td style="text-align: left;">Residential social care</td>
<td style="text-align: left;">Organisation</td>
<td style="text-align: left;">01388420145</td>
<td style="text-align: left;">www.perfectcare.co.uk</td>
<td style="text-align: left;">10-12 High Street</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">Spennymoor</td>
<td style="text-align: left;">County Durham</td>
<td style="text-align: left;">DL16 6DB</td>
<td style="text-align: left;">County Durham</td>
<td style="text-align: left;">North East</td>
<td style="text-align: left;">54.69881</td>
<td style="text-align: left;">-1.601821</td>
<td style="text-align: left;">Bishop Auckland</td>
<td style="text-align: left;">Moran, Barbara</td>
<td style="text-align: left;">2019-01-01</td>
</tr>
<tr class="even">
<td style="text-align: left;">1-1001764404</td>
<td style="text-align: left;">2013-10-11</td>
<td style="text-align: left;">N</td>
<td style="text-align: left;">Everycare Midsussex</td>
<td style="text-align: left;">VNA9N</td>
<td style="text-align: left;">01444244770</td>
<td style="text-align: left;">Parsons, Katie</td>
<td style="text-align: left;">www.everycare.co.uk/midsussex</td>
<td style="text-align: left;">0</td>
<td style="text-align: left;">Social Care Org</td>
<td style="text-align: left;">Adult social care</td>
<td style="text-align: left;">Community based adult social care services</td>
<td style="text-align: left;">Good</td>
<td style="text-align: left;">2018-10-20</td>
<td style="text-align: left;">South East</td>
<td style="text-align: left;">West Sussex</td>
<td style="text-align: left;">E38000083</td>
<td style="text-align: left;">NHS Horsham and Mid Sussex CCG</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">191-193 London Road</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">Burgess Hill</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">RH15 9RN</td>
<td style="text-align: left;">50.956288</td>
<td style="text-align: left;">-0.139426</td>
<td style="text-align: left;">Mid Sussex</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">08547200</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">1-962890981</td>
<td style="text-align: left;">Cura Muneris Limited</td>
<td style="text-align: left;">2013-10-11</td>
<td style="text-align: left;">Social Care Org</td>
<td style="text-align: left;">Adult social care</td>
<td style="text-align: left;">Community based adult social care services</td>
<td style="text-align: left;">Organisation</td>
<td style="text-align: left;">01444244770</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">191-193 London Road</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">Burgess Hill</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">RH15 9RN</td>
<td style="text-align: left;">West Sussex</td>
<td style="text-align: left;">South East</td>
<td style="text-align: left;">50.956288</td>
<td style="text-align: left;">-0.139426</td>
<td style="text-align: left;">Mid Sussex</td>
<td style="text-align: left;">Dimelow, David</td>
<td style="text-align: left;">2019-01-01</td>
</tr>
<tr class="odd">
<td style="text-align: left;">1-1001764472</td>
<td style="text-align: left;">2013-10-28</td>
<td style="text-align: left;">N</td>
<td style="text-align: left;">Cherish UK Ltd</td>
<td style="text-align: left;">VN2E0</td>
<td style="text-align: left;">01253766888</td>
<td style="text-align: left;">Stockell, Sam</td>
<td style="text-align: left;">www.cherishuk.co.uk</td>
<td style="text-align: left;">0</td>
<td style="text-align: left;">Social Care Org</td>
<td style="text-align: left;">Adult social care</td>
<td style="text-align: left;">Community based adult social care services</td>
<td style="text-align: left;">Good</td>
<td style="text-align: left;">2017-10-12</td>
<td style="text-align: left;">North West</td>
<td style="text-align: left;">Blackpool</td>
<td style="text-align: left;">E38000015</td>
<td style="text-align: left;">NHS Blackpool CCG</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">8 Skyways Commercial Centre</td>
<td style="text-align: left;">Blackpool Business Park, Amy Johnson Way</td>
<td style="text-align: left;">Blackpool</td>
<td style="text-align: left;">Lancashire</td>
<td style="text-align: left;">FY4 3RS</td>
<td style="text-align: left;">53.777788</td>
<td style="text-align: left;">-3.025486</td>
<td style="text-align: left;">Blackpool South</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">05435700</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">1-101680050</td>
<td style="text-align: left;">Cherish UK Limited</td>
<td style="text-align: left;">2011-01-25</td>
<td style="text-align: left;">Social Care Org</td>
<td style="text-align: left;">Adult social care</td>
<td style="text-align: left;">Community based adult social care services</td>
<td style="text-align: left;">Organisation</td>
<td style="text-align: left;">01253766888</td>
<td style="text-align: left;">www.cherishuk.co.uk</td>
<td style="text-align: left;">8 Skyways Commercial Centre</td>
<td style="text-align: left;">Blackpool Business Park, Amy Johnson Way</td>
<td style="text-align: left;">Blackpool</td>
<td style="text-align: left;">Lancashire</td>
<td style="text-align: left;">FY4 3RS</td>
<td style="text-align: left;">Blackpool</td>
<td style="text-align: left;">North West</td>
<td style="text-align: left;">53.777788</td>
<td style="text-align: left;">-3.025486</td>
<td style="text-align: left;">Blackpool South</td>
<td style="text-align: left;">Watson, Wendy</td>
<td style="text-align: left;">2019-01-01</td>
</tr>
<tr class="even">
<td style="text-align: left;">1-1001764512</td>
<td style="text-align: left;">2013-10-14</td>
<td style="text-align: left;">N</td>
<td style="text-align: left;">Optical Express - Bluewater Clinic</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">08000232020</td>
<td style="text-align: left;">Leadley, Robert</td>
<td style="text-align: left;">www.opticalexpress.co.uk/store/kent-bluewater-shopping-centre.html</td>
<td style="text-align: left;">0</td>
<td style="text-align: left;">Independent Healthcare Org</td>
<td style="text-align: left;">Hospitals</td>
<td style="text-align: left;">Acute hospital - Independent specialist</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">South East</td>
<td style="text-align: left;">Kent</td>
<td style="text-align: left;">E38000043</td>
<td style="text-align: left;">NHS Dartford, Gravesham and Swanley CCG</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">Unit L40, Lower Thames Walk</td>
<td style="text-align: left;">Bluewater</td>
<td style="text-align: left;">Greenhithe</td>
<td style="text-align: left;">Kent</td>
<td style="text-align: left;">DA9 9SJ</td>
<td style="text-align: left;">51.438086</td>
<td style="text-align: left;">0.271001</td>
<td style="text-align: left;">Dartford</td>
<td style="text-align: left;">BD142</td>
<td style="text-align: left;">BRAND Optical Express</td>
<td style="text-align: left;">SC161469</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">1-983441221</td>
<td style="text-align: left;">Optical Express Limited</td>
<td style="text-align: left;">2013-10-14</td>
<td style="text-align: left;">Independent Healthcare Org</td>
<td style="text-align: left;">Hospitals</td>
<td style="text-align: left;">Acute hospital - Independent specialist</td>
<td style="text-align: left;">Organisation</td>
<td style="text-align: left;">01236723300</td>
<td style="text-align: left;">www.opticalexpress.com</td>
<td style="text-align: left;">The Avenue</td>
<td style="text-align: left;">Cliftonville</td>
<td style="text-align: left;">Northampton</td>
<td style="text-align: left;">Nothamptonshire</td>
<td style="text-align: left;">NN1 5BT</td>
<td style="text-align: left;">Northamptonshire</td>
<td style="text-align: left;">East Midlands</td>
<td style="text-align: left;">52.236378</td>
<td style="text-align: left;">-0.877334</td>
<td style="text-align: left;">Northampton South</td>
<td style="text-align: left;">Spellman, Mary</td>
<td style="text-align: left;">2019-01-01</td>
</tr>
<tr class="odd">
<td style="text-align: left;">1-1001765343</td>
<td style="text-align: left;">2013-10-14</td>
<td style="text-align: left;">N</td>
<td style="text-align: left;">Optical Express - Cambridge Clinic</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">08000232020</td>
<td style="text-align: left;">Leadley, Robert</td>
<td style="text-align: left;">www.opticalexpress.co.uk/store/cambridge-petty-cury.html</td>
<td style="text-align: left;">0</td>
<td style="text-align: left;">Independent Healthcare Org</td>
<td style="text-align: left;">Hospitals</td>
<td style="text-align: left;">Acute hospital - Independent specialist</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">East of England</td>
<td style="text-align: left;">Cambridgeshire</td>
<td style="text-align: left;">E38000026</td>
<td style="text-align: left;">NHS Cambridgeshire and Peterborough CCG</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">39-41 Petty Cury</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">Cambridge</td>
<td style="text-align: left;">Cambridgeshire</td>
<td style="text-align: left;">CB2 3NB</td>
<td style="text-align: left;">52.205264</td>
<td style="text-align: left;">0.1203</td>
<td style="text-align: left;">Cambridge</td>
<td style="text-align: left;">BD142</td>
<td style="text-align: left;">BRAND Optical Express</td>
<td style="text-align: left;">SC161469</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">1-983441221</td>
<td style="text-align: left;">Optical Express Limited</td>
<td style="text-align: left;">2013-10-14</td>
<td style="text-align: left;">Independent Healthcare Org</td>
<td style="text-align: left;">Hospitals</td>
<td style="text-align: left;">Acute hospital - Independent specialist</td>
<td style="text-align: left;">Organisation</td>
<td style="text-align: left;">01236723300</td>
<td style="text-align: left;">www.opticalexpress.com</td>
<td style="text-align: left;">The Avenue</td>
<td style="text-align: left;">Cliftonville</td>
<td style="text-align: left;">Northampton</td>
<td style="text-align: left;">Nothamptonshire</td>
<td style="text-align: left;">NN1 5BT</td>
<td style="text-align: left;">Northamptonshire</td>
<td style="text-align: left;">East Midlands</td>
<td style="text-align: left;">52.236378</td>
<td style="text-align: left;">-0.877334</td>
<td style="text-align: left;">Northampton South</td>
<td style="text-align: left;">Spellman, Mary</td>
<td style="text-align: left;">2019-01-01</td>
</tr>
<tr class="even">
<td style="text-align: left;">1-1001875873</td>
<td style="text-align: left;">2013-10-14</td>
<td style="text-align: left;">N</td>
<td style="text-align: left;">Optical Express - Leeds (Albion Street) Clinic</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">08702202020</td>
<td style="text-align: left;">Saward, Louise</td>
<td style="text-align: left;">www.opticalexpress.co.uk/store/leeds-airedale-house.html</td>
<td style="text-align: left;">0</td>
<td style="text-align: left;">Independent Healthcare Org</td>
<td style="text-align: left;">Hospitals</td>
<td style="text-align: left;">Acute hospital - Independent specialist</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">Yorkshire and The Humber</td>
<td style="text-align: left;">Leeds</td>
<td style="text-align: left;">E38000225</td>
<td style="text-align: left;">NHS Leeds CCG</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">6th Floor, Airedale House</td>
<td style="text-align: left;">77-85 Albion Street</td>
<td style="text-align: left;">Leeds</td>
<td style="text-align: left;">West Yorkshire</td>
<td style="text-align: left;">LS1 5AW</td>
<td style="text-align: left;">53.798527</td>
<td style="text-align: left;">-1.545292</td>
<td style="text-align: left;">Leeds Central</td>
<td style="text-align: left;">BD142</td>
<td style="text-align: left;">BRAND Optical Express</td>
<td style="text-align: left;">SC161469</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">1-983441221</td>
<td style="text-align: left;">Optical Express Limited</td>
<td style="text-align: left;">2013-10-14</td>
<td style="text-align: left;">Independent Healthcare Org</td>
<td style="text-align: left;">Hospitals</td>
<td style="text-align: left;">Acute hospital - Independent specialist</td>
<td style="text-align: left;">Organisation</td>
<td style="text-align: left;">01236723300</td>
<td style="text-align: left;">www.opticalexpress.com</td>
<td style="text-align: left;">The Avenue</td>
<td style="text-align: left;">Cliftonville</td>
<td style="text-align: left;">Northampton</td>
<td style="text-align: left;">Nothamptonshire</td>
<td style="text-align: left;">NN1 5BT</td>
<td style="text-align: left;">Northamptonshire</td>
<td style="text-align: left;">East Midlands</td>
<td style="text-align: left;">52.236378</td>
<td style="text-align: left;">-0.877334</td>
<td style="text-align: left;">Northampton South</td>
<td style="text-align: left;">Spellman, Mary</td>
<td style="text-align: left;">2019-01-01</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>We can calculate the total number of each type of rating at each datapoint like this:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb2" style="background: #f1f3f5;"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">rat_overtime</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">cqc_load</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">pub_date</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">location_latest_overall_rating</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summarise</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span>number <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">dplyr</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">n</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">!</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">location_latest_overall_rating</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ungroup</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span>pub_date <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/as.Date.html">as.Date</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">pub_date</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span></span>
<span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">rat_overtime</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">pivot_wider</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>    id_cols <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">location_latest_overall_rating</span>,</span>
<span>    names_from <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">pub_date</span>,</span>
<span>    values_from <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">number</span></span>
<span>  <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span></code></pre></div></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 19%">
<col style="width: 6%">
<col style="width: 6%">
<col style="width: 6%">
<col style="width: 6%">
<col style="width: 6%">
<col style="width: 6%">
<col style="width: 6%">
<col style="width: 6%">
<col style="width: 6%">
<col style="width: 6%">
<col style="width: 6%">
<col style="width: 6%">
</colgroup>
<thead><tr class="header">
<th style="text-align: left;">location_latest_overall_rating</th>
<th style="text-align: right;">2019-01-01</th>
<th style="text-align: right;">2019-02-01</th>
<th style="text-align: right;">2019-03-01</th>
<th style="text-align: right;">2019-04-01</th>
<th style="text-align: right;">2019-05-01</th>
<th style="text-align: right;">2019-06-01</th>
<th style="text-align: right;">2019-07-01</th>
<th style="text-align: right;">2019-08-01</th>
<th style="text-align: right;">2019-09-01</th>
<th style="text-align: right;">2019-10-01</th>
<th style="text-align: right;">2019-11-01</th>
<th style="text-align: right;">2019-12-01</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Good</td>
<td style="text-align: right;">25000</td>
<td style="text-align: right;">25015</td>
<td style="text-align: right;">25059</td>
<td style="text-align: right;">25176</td>
<td style="text-align: right;">25192</td>
<td style="text-align: right;">25395</td>
<td style="text-align: right;">25549</td>
<td style="text-align: right;">25676</td>
<td style="text-align: right;">25816</td>
<td style="text-align: right;">25923</td>
<td style="text-align: right;">25937</td>
<td style="text-align: right;">26083</td>
</tr>
<tr class="even">
<td style="text-align: left;">Inadequate</td>
<td style="text-align: right;">366</td>
<td style="text-align: right;">363</td>
<td style="text-align: right;">378</td>
<td style="text-align: right;">384</td>
<td style="text-align: right;">395</td>
<td style="text-align: right;">394</td>
<td style="text-align: right;">399</td>
<td style="text-align: right;">410</td>
<td style="text-align: right;">419</td>
<td style="text-align: right;">425</td>
<td style="text-align: right;">436</td>
<td style="text-align: right;">434</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Outstanding</td>
<td style="text-align: right;">1163</td>
<td style="text-align: right;">1181</td>
<td style="text-align: right;">1205</td>
<td style="text-align: right;">1251</td>
<td style="text-align: right;">1282</td>
<td style="text-align: right;">1302</td>
<td style="text-align: right;">1322</td>
<td style="text-align: right;">1358</td>
<td style="text-align: right;">1391</td>
<td style="text-align: right;">1410</td>
<td style="text-align: right;">1442</td>
<td style="text-align: right;">1464</td>
</tr>
<tr class="even">
<td style="text-align: left;">Requires improvement</td>
<td style="text-align: right;">4013</td>
<td style="text-align: right;">4027</td>
<td style="text-align: right;">4036</td>
<td style="text-align: right;">4017</td>
<td style="text-align: right;">3975</td>
<td style="text-align: right;">3940</td>
<td style="text-align: right;">3944</td>
<td style="text-align: right;">3969</td>
<td style="text-align: right;">3972</td>
<td style="text-align: right;">3997</td>
<td style="text-align: right;">4047</td>
<td style="text-align: right;">4086</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>We can now plot, for each month, the proportion of locations that received each rating:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb3" style="background: #f1f3f5;"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">rat_overtime</span>, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">pub_date</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">number</span>, fill <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">location_latest_overall_rating</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_bar</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span>stat <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"identity"</span>, position <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"fill"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_minimal</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>    x <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Data publication date"</span>,</span>
<span>    y <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Proportion"</span>,</span>
<span>    fill <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"CQC rating"</span>,</span>
<span>    title <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"CQC ratings as published"</span>,</span>
<span>    caption <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Source: Care Quality Commission"</span></span>
<span>  <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span></code></pre></div></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="https://nhsrcommunity.com/blog/cqc-data_files/figure-html/ratings plot-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Although the raw numbers show increases in each rating, this is primarily driven by more and more locations becoming available: proportionally, performance has remained fairly stable at a national level.</p>
<p>We can further break this down by region to better understand what is happening:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb4" style="background: #f1f3f5;"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">region_ratings_overtime</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">cqc_load</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">pub_date</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">location_region</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">location_latest_overall_rating</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summarise</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span>number <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">dplyr</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">n</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">!</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">location_latest_overall_rating</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&amp;</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">!</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">location_region</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Unspecified"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"(pseudo) Wales"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ungroup</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span>pub_date <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/as.Date.html">as.Date</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">pub_date</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span></span>
<span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">region_ratings_overtime</span>, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">pub_date</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">number</span>, fill <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">location_latest_overall_rating</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_bar</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span>stat <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"identity"</span>, position <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"fill"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_minimal</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">facet_wrap</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">location_region</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>    x <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Data publication date"</span>,</span>
<span>    y <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Proportion"</span>,</span>
<span>    fill <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"CQC rating"</span>,</span>
<span>    title <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"CQC ratings as published"</span>,</span>
<span>    caption <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Source: Care Quality Commission"</span></span>
<span>  <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span></code></pre></div></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="https://nhsrcommunity.com/blog/cqc-data_files/figure-html/ratings over time by region-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>More interesting patterns emerge now: some regions have growing proportions of ‘Good’ or ‘Outstanding’ locations, whereas others are seeing increases in locations requiring improvement.</p>
</section><section id="how-many-new-care-homes-are-being-opened" class="level2"><h2 class="anchored" data-anchor-id="how-many-new-care-homes-are-being-opened">How many new care homes are being opened?</h2>
<p>With an ageing population, there is increasing demand for care home beds. Is supply keeping up?</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb5" style="background: #f1f3f5;"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">carehome_openings</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">cqc_load</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span>location_hsca_start_date <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/as.Date.html">as.Date</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">location_hsca_start_date</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">care_home</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Y"</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&amp;</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">location_hsca_start_date</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"2014-01-01"</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&amp;</span></span>
<span>    <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">!</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">location_region</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Unspecified"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"(pseudo) Wales"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&amp;</span></span>
<span>    <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">pub_date</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/as.Date.html">as.Date</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">pub_date</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span>location_month <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">floor_date</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">location_hsca_start_date</span>, unit <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"month"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">location_month</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summarise</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>    number <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">n</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>,</span>
<span>    beds <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/integer.html">as.integer</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">care_homes_beds</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span>  <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>    location_year <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/factor.html">as.factor</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/format.html">format</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">floor_date</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">location_month</span>, unit <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"year"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"%Y"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>,</span>
<span>    month <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/format.html">format</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">location_month</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"%m"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span>  <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span></span>
<span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">carehome_openings</span>, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span>x <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">month</span>, y <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">number</span>, colour <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">location_year</span>, group <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">location_year</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_line</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_minimal</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span></code></pre></div></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="https://nhsrcommunity.com/blog/cqc-data_files/figure-html/care home openings-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>It is likely that the 2019 timeseries drops off due to a delay between provision starting and CQC reporting data. However, overall the number of new care homes opening is not increasing! Perhaps each care home is getting bigger; how many new beds are becoming available?</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb6" style="background: #f1f3f5;"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">carehome_openings</span>, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span>x <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">month</span>, y <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">beds</span>, colour <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">location_year</span>, group <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">location_year</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_line</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_minimal</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span></code></pre></div></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="https://nhsrcommunity.com/blog/cqc-data_files/figure-html/new beds added-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>This is a bit more encouraging: in 2016 and 2017, there was a good uptick in new care home beds. However, 2018 did not perform quite as well. Still, 2019 appears to be going in the right direction!</p>


</section><a onclick="window.scrollTo(0, 0); return false;" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Back to top</a><div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-reuse"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div class="quarto-appendix-contents"><div><a rel="license" href="https://creativecommons.org/publicdomain/zero/1.0/">CC0 1.0</a></div></div></section></div> ]]></description>
  <category>Data</category>
  <guid>https://nhsrcommunity.com/blog/cqc-data.html</guid>
  <pubDate>Sun, 29 Sep 2024 00:00:00 GMT</pubDate>
  <media:content url="https://nhsrcommunity.com/blog/img/stack-papers.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>How to ask for help</title>
  <dc:creator>Lyn Howard</dc:creator>
  <link>https://nhsrcommunity.com/blog/asking_for_help.html</link>
  <description><![CDATA[ <!-- source: https://github.com/gadenbuie/garrickadenbuie-com/blob/main/_partials/title-block-link-buttons/title-block.html --><!--
<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
--><!-- <header id="title-block-header" class="quarto-title-block default page-columns"> --><!-- <div class="quarto-title page-columns page-full featured-image p-4" style="background-image: url(featured.png), url(featured.jpg), url(../featured.jpg);"> --><p>To enable others to help you, you’ll need to include a reprex, or reproducible example - a minimal example of the data and code you’re using, so they can recreate the problem.</p>
<section id="setting-things-up" class="level2"><h2 class="anchored" data-anchor-id="setting-things-up">Setting things up</h2>
<p>Ctrl + F7 in RStudio will open a new source column which you can use to gather together the information you want to share in your request for help.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb1" style="background: #f1f3f5;"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;"><a href="https://github.com/milesmcbain/datapasta">datapasta</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span></code></pre></div></div>
</div>
<p>You’ll often want to include a sample of your dataframe rather than the whole thing, particularly if it’s very large.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb2" style="background: #f1f3f5;"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">fresh_data</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">NHSRdatasets</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">::</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">LOS_model</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">dplyr</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">slice_sample</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span>n <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">20</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># This produces a sample dataframe of 20 randomly selected rows. slice_sample(prop=0.2) will randomly select 20% of rows</span></span></code></pre></div></div>
</div>
</section><section id="sharing-your-data" class="level2"><h2 class="anchored" data-anchor-id="sharing-your-data">Sharing your data</h2>
<p>The base R function <code><a href="https://rdrr.io/r/base/dput.html">dput()</a></code> produces the code to recreate your data sample.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb3" style="background: #f1f3f5;"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">fresh_data</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/dput.html">dput</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span></code></pre></div></div>
</div>
<p>or another alternative is to use df_paste() from the datapasta package.</p>
</section><section id="editing-the-dataframe" class="level2"><h2 class="anchored" data-anchor-id="editing-the-dataframe">Editing the dataframe</h2>
<p>You may need to edit the data before sharing it to anonymise it or remove confidential information. You could manually edit the output from dput() or df_paste.</p>
<section id="an-alternative-way-to-modify-your-data-for-sharing" class="level3"><h3 class="anchored" data-anchor-id="an-alternative-way-to-modify-your-data-for-sharing">An alternative way to modify your data for sharing</h3>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb4" style="background: #f1f3f5;"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># create a dataframe of organisation names and aliases</span></span>
<span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">Organisation</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/unique.html">unique</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">NHSRdatasets</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">::</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">LOS_model</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">Organisation</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">Organisation</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># checks the length of the vector Organisation</span></span>
<span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">alias</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">letters</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">[</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">]</span> <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># if you want to automate this you could use letters[1:length(Organisation)]</span></span>
<span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">df</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">Organisation</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">alias</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># combines the 2 vectors into a dataframe</span></span></code></pre></div></div>
</div>
<p>Join the dataframe we just created to the LOS_model dataframe, select the columns we want &amp; take a sample 10 rows, before piping it into dput() to create the code we can share.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb5" style="background: #f1f3f5;"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">dplyr</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">left_join</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">NHSRdatasets</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">::</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">LOS_model</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">df</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">Age</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">alias</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">Death</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">slice_sample</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span>n <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/dput.html">dput</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span></code></pre></div></div>
</div>
</section></section><section id="what-should-you-include" class="level2"><h2 class="anchored" data-anchor-id="what-should-you-include">What should you include?</h2>
<ul>
<li><p>libraries used</p></li>
<li><p>your code and an explanation of what you’re trying to achieve</p></li>
<li><p>the smallest dataset that still works</p></li>
<li><p>error messages</p></li>
<li><p>what solutions you’ve already tried</p></li>
<li><p>check that the code you’re sharing works exactly like your original code with the issue. Sometimes you’ll realise for yourself what the solution is at this point!</p></li>
<li><p>check that the code you’re sharing works exactly like your original code with the issue.</p></li>
</ul>
<p>Don’t include:</p>
<ul>
<li><p>anything confidential</p></li>
<li><p>any code that isn’t essential to the part you’re asking about</p></li>
</ul></section><section id="where-can-you-ask-for-help" class="level2"><h2 class="anchored" data-anchor-id="where-can-you-ask-for-help">Where can you ask for help?</h2>
<p><a href="https://nhsrcommunity.slack.com/" title="A friendly and inclusive community of NHS colleagues who will always try to help">NHS-R Community Slack forum</a></p>
<p><a href="https://forum.posit.co/">The Posit forum, hosted by the company that makes and maintains RStudio</a></p>


</section><a onclick="window.scrollTo(0, 0); return false;" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Back to top</a><div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-reuse"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div class="quarto-appendix-contents"><div><a rel="license" href="https://creativecommons.org/publicdomain/zero/1.0/">CC0 1.0</a></div></div></section></div> ]]></description>
  <category>NHS-R</category>
  <category>R tips</category>
  <guid>https://nhsrcommunity.com/blog/asking_for_help.html</guid>
  <pubDate>Wed, 31 Jul 2024 00:00:00 GMT</pubDate>
  <media:content url="https://nhsrcommunity.com/blog/img/help-button.png" medium="image" type="image/png" height="121" width="144"/>
</item>
<item>
  <title>NHS-R/NHS.Pycom conference 2023 my experience of the event</title>
  <dc:creator>Pablo Leon-Rodenas</dc:creator>
  <link>https://nhsrcommunity.com/blog/nhs-r-community-conference-2023-my-experience-of-the-event.html</link>
  <description><![CDATA[ 


<!-- source: https://github.com/gadenbuie/garrickadenbuie-com/blob/main/_partials/title-block-link-buttons/title-block.html -->
<!--
<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
-->
<!-- <header id="title-block-header" class="quarto-title-block default page-columns"> -->
<!-- <div class="quarto-title page-columns page-full featured-image p-4" style="background-image: url(featured.png), url(featured.jpg), url(../featured.jpg);"> -->



<section id="general-thoughts-about-the-conference" class="level2">
<h2 class="anchored" data-anchor-id="general-thoughts-about-the-conference">1. General thoughts about the Conference</h2>
<p>The NHS-R/NHS.Pycom conference, is a great event to share on a yearly basis, our passion for advanced healthcare, promoting the use of our core R language for our healthcare analysis and also other exciting languages such as Python.</p>
<p>This is a small contribution as a blog post trying to summarize some reflections after attending for the first time last year NHS-R/NHS.pycom 2023 Online Conference. Right after the conference, I drafted some impressions in a LinkedIn blog post: <a href="https://www.linkedin.com/feed/update/urn:li:activity:7121902571715223552/" class="uri">https://www.linkedin.com/feed/update/urn:li:activity:7121902571715223552/</a> , but there were so much buzz and interesting ideas to develop months after the conference ended, that they could constitute an entire blog post.</p>
<p>I just want to stress that I have tried to convey some general ideas and thoughts about last year conference, but the share amount of code, projects diversity and different background of the speakers and organisations that took place in the 2023 Conference was enough to inspire me and try new coding projects for the rest of the year.</p>
<p>There was a great range of talks from specific insights on using R packages like {purr}, to a more technical sessions like the one about Modelling non-linear data with Generalized Additive Models (GAMs), using the {mgcv} package with Chris Mainey. <a href="https://nhsrcommunity.com/events/nhs-r-nhs-pycom-online-conference-workshop-2023-modelling-non-linear-data-with-generalized-additive-models-gams-using-the-mgcv-package/" class="uri">https://nhsrcommunity.com/events/nhs-r-nhs-pycom-online-conference-workshop-2023-modelling-non-linear-data-with-generalized-additive-models-gams-using-the-mgcv-package/</a></p>
<p>What I most liked about the Conference was the mix of different speakers, ranging from Community developers, International Speakers and well known companies promoting the use of R and Rstudio such as Posit.</p>
<p>Some talks were Technical about specific models or packages, and others described problem solving situations in the NHS, where R has been used to create apps, like the talk where they used R to map EHR data to OMOP Common Data model on the 9th of October Online Conference or the Automatic reporting pack generation talk on the 11th of October.</p>
<p>On top of that, I really enjoyed other talks, where Python and PowerBI examples and projects were presented. It is a very inclusive event and seeing examples of different programming languages, broads our interest as analysts. There was always a good takeaway to try after the conference in R, Python or PowerBI.</p>
<p>I find really inspiring how the event manages to empower all analysts working in the NHS to add more languages to our toolbox, helping us in our daily work.</p>
<p>In this section below, I have listed the links to conference contents for each of the three main days 9, 10 and 11th of October 2023.</p>
<p><strong>NHS- R/NHS.pycom Conference: Online Conference Talks – Monday 9th October 2023</strong> Conference recording on YouTube:<a href="https://www.youtube.com/watch?v=X-fyKq1GXQI" class="uri">https://www.youtube.com/watch?v=X-fyKq1GXQI</a></p>
<p><strong>NHS- R/NHS.pycom Conference: Online Conference Talks – Tuesday 10th October 2023</strong> Conference recording on YouTube:<a href="https://www.youtube.com/watch?v=laKYVuElROs&amp;t=1s" class="uri">https://www.youtube.com/watch?v=laKYVuElROs&amp;t=1s</a></p>
<p><strong>NHS- R/NHS.pycom Conference: Online Conference Talks – Wednesday 11th October 2023</strong> Conference recording on YouTube:<a href="https://www.youtube.com/watch?v=3uSbLT7ISPc" class="uri">https://www.youtube.com/watch?v=3uSbLT7ISPc</a></p>
<p>Also I really appreciated that during and after the Conference, on the slack channel and on the NHS-R Conference website, all the GitHub repositories were made available with the talk slides and materials presented: <a href="https://github.com/chrismainey/GAMworkshop" class="uri">https://github.com/chrismainey/GAMworkshop</a></p>
</section>
<section id="last-year-nhs-rnhs.pycom-2023-conference-was-a-great-opportunity-to-listen-live-to-analysts-and-keynote-speakers-i-have-been-reading-recently.-and-to-inspire-existing-ongoing-projects" class="level2">
<h2 class="anchored" data-anchor-id="last-year-nhs-rnhs.pycom-2023-conference-was-a-great-opportunity-to-listen-live-to-analysts-and-keynote-speakers-i-have-been-reading-recently.-and-to-inspire-existing-ongoing-projects">2. Last year NHS-R/NHS.pycom 2023 conference was a great opportunity to listen live to analysts and Keynote speakers I have been reading recently. And to inspire existing ongoing projects</h2>
<p>Earlier that year, I bought and read the New Book from Bruno Rodrigues “Building reproducible analytical pipelines with R”. <a href="https://www.amazon.com/dp/B0C87H6MGF/" class="uri">https://www.amazon.com/dp/B0C87H6MGF/</a></p>
<p>That book has been extremely helpful for me to lean how to write more robust code, collaborate on GitHub with other projects, and also learn in more detail about functional programming. In fact, I used this knowledge to create the materials I used on the Lightning Talk I had the opportunity to present on the 10th of October. “Create a website using Quarto linking Rstudio with GitHub”: <a href="https://nhsrcommunity.com/events/nhs-r-nhs-pycom-online-conference-talks-2023-ticket-for-virtual-attendance-on-tuesday-10th-october-2023/" class="uri">https://nhsrcommunity.com/events/nhs-r-nhs-pycom-online-conference-talks-2023-ticket-for-virtual-attendance-on-tuesday-10th-october-2023/</a></p>
<p>The presentation for that Lightning talk is available on GitHub: <a href="https://pablo-source.github.io/NHS_R_Pycom_2023.html#/title-slide" class="uri">https://pablo-source.github.io/NHS_R_Pycom_2023.html#/title-slide</a>. Alongside with the materials used to build it :<a href="https://github.com/Pablo-tester/presentations/tree/main/NHS_R_NHS_Pycom_Oct23" class="uri">https://github.com/Pablo-tester/presentations/tree/main/NHS_R_NHS_Pycom_Oct23</a></p>
<p>Overall, the topics covered during the NHS-R/NHS.pycom 2023 Conference allowed me to improve the quality of my R and Python code, and improved my collaboration with other analysts using Git and GitHub in a more efficient way.</p>
<p>This year I have tested these new skills on a new project using {target} library to build a small pipeline to build a univariate Time Series model using ARIMA and PROPHET models. I am sill expanding this initial pipeline project. <a href="https://github.com/Pablo-source/targets-test" class="uri">https://github.com/Pablo-source/targets-test</a></p>
</section>
<section id="conference-workshops" class="level2">
<h2 class="anchored" data-anchor-id="conference-workshops">3. Conference workshops</h2>
<p>There were plenty of workshops available through the NHS-R/NHS.pycom Online Conference. These workshops were running in parallel to the main talk sessions, and running with a small groups of attendants. Its hands on nature was great to learn quickly joining efforts with other analysts. These workshop websites can be found in the NHS-R website past events section: <a href="https://nhsrcommunity.com/past-events/" class="uri">https://nhsrcommunity.com/past-events/</a></p>
<p>I would have loved to be able to attend all the workshops, but unfortunately it was not possible, but I enjoyed the following five ones, with a great combination of advanced statistical analysis and visualization techniques.</p>
<p>NHS-R/NHS.pycom Online Conference Workshop 2023 – Modelling non-linear data with Generalized Additive Models (GAMs), using the {mgcv} package</p>
<p><a href="https://nhsrcommunity.com/events/nhs-r-nhs-pycom-online-conference-workshop-2023-modelling-non-linear-data-with-generalized-additive-models-gams-using-the-mgcv-package/" class="uri">https://nhsrcommunity.com/events/nhs-r-nhs-pycom-online-conference-workshop-2023-modelling-non-linear-data-with-generalized-additive-models-gams-using-the-mgcv-package/</a></p>
<p>NHS-R/NHS.pycom Online Conference Workshop 2023 – Create your own API with Python and FastAPI Workshop recording on YouTube:<a href="https://www.youtube.com/watch?v=_D4llf41KC8" class="uri">https://www.youtube.com/watch?v=_D4llf41KC8</a></p>
<p>NHS-R/NHS.pycom Online Conference Workshop 2023 – Introduction to Regression Modelling in R</p>
<p>NHS-R/NHS.pycom Online Conference Workshop 2023 – Data Visualisation with Seaborn Workshop recording on YouTube: <a href="https://www.youtube.com/watch?v=LZdbCOOdsPE" class="uri">https://www.youtube.com/watch?v=LZdbCOOdsPE</a></p>
<p>Also I do like that across all Conference workshops, RAP principles and Version control talks were present on several of the available workshops/</p>
<p>NHS-R/NHS.pycom Online Conference Workshop 2023 – Introduction to Version Control (Git/GitHub) Workshop recording on YouTube: <a href="https://www.youtube.com/watch?v=wOk7wDsHD8o" class="uri">https://www.youtube.com/watch?v=wOk7wDsHD8o</a></p>
</section>
<section id="final-takeaway-ideas-from-last-year-conference" class="level2">
<h2 class="anchored" data-anchor-id="final-takeaway-ideas-from-last-year-conference">4. Final takeaway ideas from last year conference</h2>
<ul>
<li><p>The NHS-R NHS-R/NHS.pycom Online Conference Talks 2023 is a source of inspiration for Analysts working with R and Python, from both Keynote, Plenary and Lightning Talks.</p></li>
<li><p>Is also a great opportunity to meet analysts and developers from the NHS and also other Organisations and companies, allowing you to network and match specific projects with the people and teams developing it. Great to see the faces behind all these big projects.</p></li>
<li><p>It is great to listen live international speakers from R and Posit and many other companies, explaining how they have designed the packages and tools sometimes we use in our day to day job. It is fantastic to see at the conference the developers presenting the most popular packages and tools we use in our day to day job.</p></li>
<li><p>Thanks to the speakers and organisation making most of the talk materials available online, it is perfect to learn at our own pace in the months after the Conference has taken place.</p></li>
<li><p>Also most of the tools used are R and Python, making open software and scripts used in the demos available on GitHub. That gives us plenty of materials to explore and learn from our own GitHub repos right after each conference day.</p></li>
</ul>


</section>

<a onclick="window.scrollTo(0, 0); return false;" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Back to top</a><div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-reuse"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div class="quarto-appendix-contents"><div><a rel="license" href="https://creativecommons.org/publicdomain/zero/1.0/">CC0 1.0</a></div></div></section></div> ]]></description>
  <category>Conference</category>
  <guid>https://nhsrcommunity.com/blog/nhs-r-community-conference-2023-my-experience-of-the-event.html</guid>
  <pubDate>Tue, 04 Jun 2024 00:00:00 GMT</pubDate>
  <media:content url="https://nhsrcommunity.com/blog/img/2023-nhsr-conference.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>Publish on GitHub</title>
  <dc:creator>Zoë Turner</dc:creator>
  <link>https://nhsrcommunity.com/blog/publish-on-github.html</link>
  <description><![CDATA[ 


<!-- source: https://github.com/gadenbuie/garrickadenbuie-com/blob/main/_partials/title-block-link-buttons/title-block.html -->
<!--
<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
-->
<!-- <header id="title-block-header" class="quarto-title-block default page-columns"> -->
<!-- <div class="quarto-title page-columns page-full featured-image p-4" style="background-image: url(featured.png), url(featured.jpg), url(../featured.jpg);"> -->



<p>I had a question on this directly on how to publish and then another one popped up on the NHS-R Community Slack so, in the principle of DRY (Don’t Repeat Yourself) this is a short blog on how to publish (free!) slides, websites and reports through GitHub.</p>
<p>We publish all the NHS-R Community course slides through GitHub and the following refers to the <a href="https://intro-quarto.nhsrcommunity.com/">Introduction to Quarto slides</a>.</p>
<section id="setting-up-on-github" class="level1">
<h1>Setting up on GitHub</h1>
<p>Publishing is through the Settings tab which is hidden unless you have rights to the repository.</p>
<p>There will be a Pages tab along the side which is where the settings can be changed <a href="https://docs.github.com/en/pages/getting-started-with-github-pages/creating-a-github-pages-site" class="uri">https://docs.github.com/en/pages/getting-started-with-github-pages/creating-a-github-pages-site</a>.</p>
<p>The NHS-R Community course repositories publish through the “deploy from a branch” setting with <code>main</code> and <code>root</code> on the branch but note that these have a redirect on the pages to the NHS-R web url so is called <code>nhsrcommunity.com</code>. Pages that are published through GitHub usually have <code>github.io</code> in the url name.</p>
</section>
<section id="for-quarto-files" class="level1">
<h1>For Quarto files</h1>
<p>If you are publishing a series of slides, as the format is often for NHS-R Community courses, if you add a blank file to the folder and call it <code>_quarto.yml</code> it acts like an engine to all the slides so you don’t have to repeat code. An example is <a href="https://github.com/nhs-r-community/intro-quarto/blob/main/_quarto.yml" class="uri">https://github.com/nhs-r-community/intro-quarto/blob/main/_quarto.yml</a> where the author is coded once here but appears on all the slides in this project folder. This isn’t needed for publishing but can make your code a bit less cluttered if you have many files to publish and means you only have to make changes in one place.</p>


</section>

<a onclick="window.scrollTo(0, 0); return false;" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Back to top</a><div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-reuse"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div class="quarto-appendix-contents"><div><a rel="license" href="https://creativecommons.org/publicdomain/zero/1.0/">CC0 1.0</a></div></div></section></div> ]]></description>
  <category>GitHub</category>
  <category>RMarkdown</category>
  <category>Quarto</category>
  <guid>https://nhsrcommunity.com/blog/publish-on-github.html</guid>
  <pubDate>Mon, 03 Jun 2024 00:00:00 GMT</pubDate>
  <media:content url="https://nhsrcommunity.com/blog/img/screenshot-github-settings.PNG" medium="image"/>
</item>
<item>
  <title>Recoding an NA and back again</title>
  <dc:creator>Zoë Turner</dc:creator>
  <link>https://nhsrcommunity.com/blog/coding-to-and-from-NA.html</link>
  <description><![CDATA[ 


<!-- source: https://github.com/gadenbuie/garrickadenbuie-com/blob/main/_partials/title-block-link-buttons/title-block.html -->
<!--
<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
-->
<!-- <header id="title-block-header" class="quarto-title-block default page-columns"> -->
<!-- <div class="quarto-title page-columns page-full featured-image p-4" style="background-image: url(featured.png), url(featured.jpg), url(../featured.jpg);"> -->



<section id="create-data" class="level2">
<h2 class="anchored" data-anchor-id="create-data">Create data</h2>
<p>This was written originally in an Excel spreadsheet and used {datapasta} to copy into R as code to build the same data frame. {datapasta} can be access through RStudio as an Addin as well as code. Find out more about {datapasta} from the <a href="https://intro-r-rstudio.nhsrcommunity.com/session-datapasta.html#/title-slide">Introduction to R and R Studio course</a>.</p>
</section>
<section id="recoding-to-na" class="level2">
<h2 class="anchored" data-anchor-id="recoding-to-na">Recoding to NA</h2>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1">survey <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> tibble<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tribble</span>(</span>
<span id="cb1-2">  <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span>Survey.Response, <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span>Code,</span>
<span id="cb1-3">       <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Response1"</span>,   <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">9</span>L,</span>
<span id="cb1-4">       <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Response2"</span>,    <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>L,</span>
<span id="cb1-5">       <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Response3"</span>,   <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>L,</span>
<span id="cb1-6">       <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Response4"</span>,    <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>L,</span>
<span id="cb1-7">       <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Response5"</span>,    <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>L,</span>
<span id="cb1-8">       <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Response6"</span>,   <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">9</span>L,</span>
<span id="cb1-9">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Missing"</span>, <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">NA</span></span>
<span id="cb1-10">  )</span></code></pre></div></div>
</div>
</section>
<section id="recode-to-na" class="level2">
<h2 class="anchored" data-anchor-id="recode-to-na">Recode to NA</h2>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(tidyverse)</span>
<span id="cb2-2"></span>
<span id="cb2-3">survey <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb2-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">new_column =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">na_if</span>(Code, <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">9</span>))</span></code></pre></div></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 7 × 3
  Survey.Response  Code new_column
  &lt;chr&gt;           &lt;int&gt;      &lt;int&gt;
1 Response1          -9         NA
2 Response2           2          2
3 Response3          10         10
4 Response4           0          0
5 Response5           5          5
6 Response6          -9         NA
7 Missing            NA         NA</code></pre>
</div>
</div>
<p>It’s also possible to use the numbers and <code>case_when()</code>:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="annotated-cell-3" style="background: #f1f3f5;"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><span id="annotated-cell-3-1">survey <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-3" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-3-2" class="code-annotation-target">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">new_column =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">case_when</span>(Code <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">NA</span>,</span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-3" data-target-annotation="2" onclick="event.preventDefault();">2</a><span id="annotated-cell-3-3" class="code-annotation-target">                                Code <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1000</span>,</span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-3" data-target-annotation="3" onclick="event.preventDefault();">3</a><span id="annotated-cell-3-4" class="code-annotation-target">                                <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">.default =</span> Code))</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code></pre></div></div>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-3" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-3" data-code-lines="2" data-code-annotation="1">Where <code>Code</code> is less than 0 then code to <code>NA</code>.</span>
</dd>
<dt data-target-cell="annotated-cell-3" data-target-annotation="2">2</dt>
<dd>
<span data-code-cell="annotated-cell-3" data-code-lines="3" data-code-annotation="2">Where <code>Code</code> is equal to 0 then recode to <code>1000</code> which is a number that will stand out.</span>
</dd>
<dt data-target-cell="annotated-cell-3" data-target-annotation="3">3</dt>
<dd>
<span data-code-cell="annotated-cell-3" data-code-lines="4" data-code-annotation="3">For everything else return the original data from column <code>Code</code>.</span>
</dd>
</dl>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 7 × 3
  Survey.Response  Code new_column
  &lt;chr&gt;           &lt;int&gt;      &lt;dbl&gt;
1 Response1          -9         NA
2 Response2           2          2
3 Response3          10         10
4 Response4           0       1000
5 Response5           5          5
6 Response6          -9         NA
7 Missing            NA         NA</code></pre>
</div>
</div>
<p>Or <code>ifelse()</code> where there are only two options:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1">survey <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb5-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">new_column =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ifelse</span>(Code <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">NA</span>, Code))</span></code></pre></div></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 7 × 3
  Survey.Response  Code new_column
  &lt;chr&gt;           &lt;int&gt;      &lt;int&gt;
1 Response1          -9         NA
2 Response2           2          2
3 Response3          10         10
4 Response4           0          0
5 Response5           5          5
6 Response6          -9         NA
7 Missing            NA         NA</code></pre>
</div>
</div>
</section>
<section id="recode-from-na" class="level2">
<h2 class="anchored" data-anchor-id="recode-from-na">Recode from NA</h2>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1">survey <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb7-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">new_column2 =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">replace_na</span>(Code, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1000</span>))</span></code></pre></div></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 7 × 3
  Survey.Response  Code new_column2
  &lt;chr&gt;           &lt;int&gt;       &lt;int&gt;
1 Response1          -9          -9
2 Response2           2           2
3 Response3          10          10
4 Response4           0           0
5 Response5           5           5
6 Response6          -9          -9
7 Missing            NA        1000</code></pre>
</div>
</div>


</section>

<a onclick="window.scrollTo(0, 0); return false;" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Back to top</a><div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-reuse"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div class="quarto-appendix-contents"><div><a rel="license" href="https://creativecommons.org/publicdomain/zero/1.0/">CC0 1.0</a></div></div></section></div> ]]></description>
  <category>R tips</category>
  <guid>https://nhsrcommunity.com/blog/coding-to-and-from-NA.html</guid>
  <pubDate>Tue, 12 Mar 2024 00:00:00 GMT</pubDate>
</item>
<item>
  <title>Showcasing a function - separate()
</title>
  <dc:creator>Zoë Turner</dc:creator>
  <link>https://nhsrcommunity.com/blog/showcasing-functions-separate.html</link>
  <description><![CDATA[ <!-- source: https://github.com/gadenbuie/garrickadenbuie-com/blob/main/_partials/title-block-link-buttons/title-block.html --><!--
<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
--><!-- <header id="title-block-header" class="quarto-title-block default page-columns"> --><!-- <div class="quarto-title page-columns page-full featured-image p-4" style="background-image: url(featured.png), url(featured.jpg), url(../featured.jpg);"> --><section id="create-data" class="level2"><h2 class="anchored" data-anchor-id="create-data">Create data</h2>
<p>This was written originally in an Excel spreadsheet and used {datapasta} to copy into R as code to build the same data frame. {datapasta} can be access through RStudio as an Addin as well as code. Find out more about {datapasta} from the <a href="https://intro-r-rstudio.nhsrcommunity.com/session-datapasta.html#/title-slide">Introduction to R and R Studio course</a>.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb1" style="background: #f1f3f5;"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">data</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tibble</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tribble</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>    <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">Patient</span>,          <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">Codes</span>,</span>
<span>  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"PatientA"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"A01, A02, A03"</span>,</span>
<span>  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"PatientB"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"B01; B02; B03"</span>,</span>
<span>  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"PatientC"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"C01; C03"</span>,</span>
<span>  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"PatientD"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"D01. D02. D03"</span></span>
<span>  <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span></code></pre></div></div>
</div>
</section><section id="separate-codes-by-position" class="level2"><h2 class="anchored" data-anchor-id="separate-codes-by-position">Separate codes by position</h2>
<p>Separate into columns in the order data appears</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb2" style="background: #f1f3f5;"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span></span>
<span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">data</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tidyr</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">separate</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">Codes</span>, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"col1"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"col2"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"col3"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span></code></pre></div></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 4
  Patient  col1  col2  col3 
  &lt;chr&gt;    &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;
1 PatientA A01   A02   A03  
2 PatientB B01   B02   B03  
3 PatientC C01   C03   &lt;NA&gt; 
4 PatientD D01   D02   D03  </code></pre>
</div>
</div>
<p><a href="https://tidyr.tidyverse.org/reference/separate.html">https://tidyr.tidyverse.org/reference/separate.html</a></p>
</section><section id="add-a-pivot" class="level2"><h2 class="anchored" data-anchor-id="add-a-pivot">Add a pivot</h2>
<p>To move wide data to longer:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb4" style="background: #f1f3f5;"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">data</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tidyr</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">separate</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">Codes</span>, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"col1"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"col2"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"col3"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tidyr</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">pivot_longer</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span>cols <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">starts_with</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"col"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>,</span>
<span>               names_to <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"type"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span></code></pre></div></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 12 × 3
   Patient  type  value
   &lt;chr&gt;    &lt;chr&gt; &lt;chr&gt;
 1 PatientA col1  A01  
 2 PatientA col2  A02  
 3 PatientA col3  A03  
 4 PatientB col1  B01  
 5 PatientB col2  B02  
 6 PatientB col3  B03  
 7 PatientC col1  C01  
 8 PatientC col2  C03  
 9 PatientC col3  &lt;NA&gt; 
10 PatientD col1  D01  
11 PatientD col2  D02  
12 PatientD col3  D03  </code></pre>
</div>
</div>


</section><a onclick="window.scrollTo(0, 0); return false;" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Back to top</a><div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-reuse"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div class="quarto-appendix-contents"><div><a rel="license" href="https://creativecommons.org/publicdomain/zero/1.0/">CC0 1.0</a></div></div></section></div> ]]></description>
  <category>R tips</category>
  <guid>https://nhsrcommunity.com/blog/showcasing-functions-separate.html</guid>
  <pubDate>Tue, 12 Mar 2024 00:00:00 GMT</pubDate>
  <media:content url="https://nhsrcommunity.com/blog/img/screenshot-separate-code.png" medium="image" type="image/png" height="91" width="144"/>
</item>
<item>
  <title>Building a Quarto website for NHS-R Community</title>
  <dc:creator>Zoë Turner</dc:creator>
  <link>https://nhsrcommunity.com/blog/building-a-quarto-website.html</link>
  <description><![CDATA[ 


<!-- source: https://github.com/gadenbuie/garrickadenbuie-com/blob/main/_partials/title-block-link-buttons/title-block.html -->
<!--
<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
-->
<!-- <header id="title-block-header" class="quarto-title-block default page-columns"> -->
<!-- <div class="quarto-title page-columns page-full featured-image p-4" style="background-image: url(featured.png), url(featured.jpg), url(../featured.jpg);"> -->



<section id="the-story-so-far" class="level1 page-columns page-full">
<h1>The story so far</h1>
<p>A few years ago Mohammed A Mohammed, who was integral to getting NHS-R Community set up, suggested I might like to get involved by creating a website for NHS-R Community. At that time I had no idea where to start so my involvement stalled and a website was built, with help from a 3rd party, in WordPress. WordPress is a great website tool that can support very complicated sites like NHS-R Community’s, as we have both a static site and an Events Management system which means that we don’t need to rely (or pay!) for Eventbrite. We’ve used the system for sign up to hundreds of webinars and workshops, not to mention several hundred people attending conferences over the years.</p>
<section id="moving-to-purely-coded-websites" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="moving-to-purely-coded-websites">Moving to purely coded websites</h2>
<p>In the time it’s taken from that initial suggestion about building the website to now, where I help to manage the site, I’ve had the opportunity to build websites for myself using <a href="https://rstudio.github.io/distill/website.html">{distill}</a> and <a href="https://hugo-apero-docs.netlify.app/">Hugo Apéro</a> as well as the release of <a href="https://quarto.org/">Quarto</a> which I was incredibly keen to try out for website creation.</p>
<p>I’d used Quarto for slides and reports and been hugely impressed with it. Getting started with Quarto is relatively easy if you’ve coded for a while, but like with anything, you have to start off at the basics and quickly want more complex functionality as you get going. This is even more of an issue when you are moving from one system to another and it’s more of a translation than a build-from-scratch project.</p>

<div class="no-row-height column-margin column-container"><div class="margin-aside">
<p>Although Quarto has come from the R side of coding it can be used by any other language coder as it supports Python, Julia and Observable. Quarto output can be built in RStudio but equally as easily in other programs like VS Code.</p>
</div></div><p>Luckily for me, many people had already jumped into Quarto websites and their code was available online to delve into. I particularly was keen to follow the work of the Brian Tarran for the Royal Statistical Society’s <a href="https://realworlddatascience.net/">Real World Data Science</a> website because, at first glance, this doesn’t give itself away as being built on Quarto! And I also really like Silvia Canelón’s <a href="https://silviacanelon.com/">personal blog site</a> for its beauty and functionality. Silvia has particularly worked hard on accessibility of her website and has written a lot of CSS code which I’m learning through what she has shared.</p>
<p>Accessibility is something that the WordPress site needed considerable work on, particularly when checked with a website called the <a href="https://wave.webaim.org/">Web Accessibility Evaluation Tool</a> which Silvia recommends on her blog site. The new Quarto site will need this too of course but now that the code is out in the open, anyone can contribute. That can be either making changes to the code but also highlighting problems as issues that can then be open to everyone to view.</p>
</section>
<section id="benefits-to-quarto" class="level2">
<h2 class="anchored" data-anchor-id="benefits-to-quarto">Benefits to Quarto</h2>
<section id="accessibility" class="level3">
<h3 class="anchored" data-anchor-id="accessibility">Accessibility</h3>
<p>I’ll mention accessibility again as that’s hugely important and I like the fact that the people working on Quarto also think a lot about accessibility. Adding alt text has never been easier and any code (in the YAML) that refers to an image nearly always has functionality to add image alt text too.</p>
</section>
<section id="search-functionality" class="level3">
<h3 class="anchored" data-anchor-id="search-functionality">Search functionality</h3>
<p>The search function for Quarto books is really impressive and the same functionality can be found in Quarto websites. There might be a plug in within WordPress to make searching through blogs for particular words but with Quarto it’s not something that needs adding - it’s there from the start. I now no longer have to think about tags or categories for blogs to make them easier to find (and then remember them to find the blogs which is the trickier part for me!).</p>
</section>
<section id="formatting-code" class="level3">
<h3 class="anchored" data-anchor-id="formatting-code">Formatting code</h3>
<p>This was a bit of a niggle with WordPress in that it’s not really a website for coders to show their code examples (although there may be a plug in for that!). Quarto handles code snippets and examples by beautifully formatting it to look different to text but also runs the code for you if you want. It’s meant that the charts that are talked about in some blogs are produced as the code is run, not as static pictures that also can’t be copied easily as a picture doesn’t give the functionality for highlighting to copy.</p>
<p>Usually a blogger will choose a nice image to complement their writing and Quarto gives that functionality but I had a lovely surprise when charts that are created by the blog code became the thumbnail image automatically.</p>
</section>
<section id="open-to-contribution" class="level3">
<h3 class="anchored" data-anchor-id="open-to-contribution">Open to contribution</h3>
<p>Having a website that can publish R or Python code is an absolute joy. I used to write blogs in RMarkdown, render them to html and then copy the output to WordPress and in the copying and pasting often lost links or formatting.</p>
<p>Being open to contribution of course also means that the repository will be available to people to do pull requests. I’ve set the repository so that it’s not necessary to Render the website to contribute so any additions or changes just need to be made to the <code>qmd</code> files.</p>
</section>
<section id="a-chance-to-delve-into-history" class="level3">
<h3 class="anchored" data-anchor-id="a-chance-to-delve-into-history">A chance to delve into history</h3>
<p>Now this point could have come from any change in website but I’ve taken the opportunity to go through each blog and transfer it to Quarto. There are no doubt quicker ways to do this as I can export from WordPress and then work on code to to get it to a format that can be published, but I started with moving a couple of blogs to get started and I’ve really enjoyed this even though it takes a bit more time to do.</p>
<p>Starting in 2018 when the blogs first started I didn’t know R <em>at all</em>. I started learning with NHS-R Community so these early blogs meant very little to me at the time. As I’ve gone through each blog, formatting them and checking the R code runs (I found a couple of tiny mistakes this way) and the links still work I’ve been more like an archivist than a coder. My favourite discovery, and shock, was that I found that RAP (Reproducible Analytical Pipelines) was shared with the NHS-R Community in 2018 although I only really heard about it from 2020. It was very much like the moment I experienced when I went through my old Geography school books and found I’d been taught in those lessons about Index of Multiple Deprivation (IMD) but I had absolutely no recollection of it at all! It hadn’t been the right time for me to really hear about it and yet in time, it’s become something that I now really love working with. You can read more about IMD in a Quarto collaborative book for NHS-R Community called <a href="https://health-inequalities.nhsrcommunity.com/content/imd.html">Health Inequalities</a>.</p>
</section>
</section>
<section id="contributions-are-welcome" class="level2">
<h2 class="anchored" data-anchor-id="contributions-are-welcome">Contributions are welcome!</h2>
<p>Knowing where to start with contributions can be a barrier so I’ve written out a few things to try to help people do this. Firstly, our Quarto book (yes another one - they are additive be warned!) <a href="https://tools.nhsrcommunity.com/contribution.html">Statement on Tools</a> includes some technical appendices including Contributing to <a href="https://tools.nhsrcommunity.com/contribution.html">GitHub repositories</a>.</p>
<p>If you want to get involved with the NHS-R Community more generally we are building on the <a href="https://nhsrway.nhsrcommunity.com/community-handbook.html">NHS-R Way</a> which essentially documents the community. We’ve got a number of activities listed out and these are all open to get involved with, or set up something else.</p>
<p>We can be found, as a community, in <a href="https://nhsrway.nhsrcommunity.com/community-handbook.html#slack">Slack</a> and our central email is <a href="nhs.rcommunity@nhs.net">nhs.rcommunity@nhs.net</a>.</p>


</section>
</section>

<a onclick="window.scrollTo(0, 0); return false;" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Back to top</a><div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-reuse"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div class="quarto-appendix-contents"><div><a rel="license" href="https://creativecommons.org/publicdomain/zero/1.0/">CC0 1.0</a></div></div></section></div> ]]></description>
  <category>Reflections</category>
  <guid>https://nhsrcommunity.com/blog/building-a-quarto-website.html</guid>
  <pubDate>Sat, 24 Feb 2024 00:00:00 GMT</pubDate>
</item>
<item>
  <title>Navigating the Data-Driven Frontier: Insights from an NHS-R Committee Member</title>
  <dc:creator>Prajwal Khairnar</dc:creator>
  <link>https://nhsrcommunity.com/blog/navigating-the-data-driven-frontier-insights-from-an-nhs-r-committee-member.html</link>
  <description><![CDATA[ 


<!-- source: https://github.com/gadenbuie/garrickadenbuie-com/blob/main/_partials/title-block-link-buttons/title-block.html -->
<!--
<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
-->
<!-- <header id="title-block-header" class="quarto-title-block default page-columns"> -->
<!-- <div class="quarto-title page-columns page-full featured-image p-4" style="background-image: url(featured.png), url(featured.jpg), url(../featured.jpg);"> -->



<!-- Image by <a href="https://pixabay.com/users/startupstockphotos-690514/?utm_source=link-attribution&utm_medium=referral&utm_campaign=image&utm_content=594090">StartupStockPhotos</a> from <a href="https://pixabay.com//?utm_source=link-attribution&utm_medium=referral&utm_campaign=image&utm_content=594090">Pixabay</a> -->
<p>Greetings, esteemed members of the NHS-R Community, data enthusiasts, and healthcare aficionados! It is with great excitement that I share my recent journey as a committee member with the NHS-R Community, a vibrant hub dedicated to championing the use of R and data science tools in the UK health and care system.</p>
<section id="the-community" class="level2">
<h2 class="anchored" data-anchor-id="the-community">The Community</h2>
<p>Established in 2018, the NHS-R Community has rapidly evolved into a dynamic collective of professionals from diverse backgrounds. Our community encompasses members from public sector organizations, including Local Authorities and Civil Service, academia, and the voluntary sector. We are united by a shared passion for advancing healthcare through the transformative power of data. While our core language is R, we are equally enthusiastic about embracing a broad spectrum of data science tools, recognizing their integral role in shaping the future of healthcare analytics.</p>
</section>
<section id="steering-the-course-the-committees-impact" class="level2">
<h2 class="anchored" data-anchor-id="steering-the-course-the-committees-impact">Steering the Course: The Committee’s Impact</h2>
<p>As a committee member, my role involves active participation in shaping the community’s approach, focus, and overall strategy. We meet regularly to deliberate on initiatives, conferences, and the overarching direction for the community. The committee serves as a crucial forum for collective decision-making, ensuring that our initiatives align with the evolving needs of the community and contribute to positive change.</p>
</section>
<section id="committee-meetings-a-glimpse-into-our-world" class="level2">
<h2 class="anchored" data-anchor-id="committee-meetings-a-glimpse-into-our-world">Committee Meetings: A Glimpse into Our World</h2>
<p>Our meetings are a lively exchange of ideas, experiences, and visions for the future. Whether we’re brainstorming innovative projects, refining strategies, or planning impactful conferences, each committee member brings a unique perspective to the table. The collaborative spirit is palpable as we navigate the dynamic landscape of data science in healthcare.</p>
</section>
<section id="driving-positive-change" class="level2">
<h2 class="anchored" data-anchor-id="driving-positive-change">Driving Positive Change</h2>
<p>Being part of the committee means playing a pivotal role in fostering collaboration and steering the community toward meaningful outcomes. We celebrate diversity in thought and expertise, recognizing that it is the key to unlocking the full potential of data science in healthcare.</p>
</section>
<section id="contributions-welcome" class="level2">
<h2 class="anchored" data-anchor-id="contributions-welcome">Contributions Welcome</h2>
<p>One of the hallmarks of our community is the open invitation for contributions. Our GitHub repository: <a href="https://github.com/nhs-r-community">NHS-R Community</a> hosts a wealth of resources, including packages and training materials, and we wholeheartedly welcome contributions from community members. It’s an empowering experience to witness the collective impact of our shared knowledge and skills.</p>
</section>
<section id="join-the-conversation" class="level2">
<h2 class="anchored" data-anchor-id="join-the-conversation">Join the Conversation</h2>
<p>If you’re passionate about data science, healthcare, and making a positive impact, the NHS-R Community is the place to be. Whether you’re an R enthusiast, a data science wizard, or a healthcare professional with an interest in analytics, there’s a place for you in our diverse and welcoming community.</p>
<p>As I continue my journey as a committee member, I’m excited about the endless possibilities that lie ahead. Together, we’re shaping the future of healthcare analytics, one R script at a time.</p>
<p>Stay tuned for more updates from the NHS-R Community, where data meets healthcare, and innovation knows no bounds. See you in the data-driven frontier!</p>


</section>

<a onclick="window.scrollTo(0, 0); return false;" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Back to top</a><div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-reuse"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div class="quarto-appendix-contents"><div><a rel="license" href="https://creativecommons.org/publicdomain/zero/1.0/">CC0 1.0</a></div></div></section></div> ]]></description>
  <category>Committee</category>
  <guid>https://nhsrcommunity.com/blog/navigating-the-data-driven-frontier-insights-from-an-nhs-r-committee-member.html</guid>
  <pubDate>Tue, 06 Feb 2024 00:00:00 GMT</pubDate>
  <media:content url="https://nhsrcommunity.com/blog/img/startup.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>What is a “proper” data scientist anyway?</title>
  <dc:creator>Chris Beeley</dc:creator>
  <link>https://nhsrcommunity.com/blog/what-is-a-proper-data-scientist-anyway.html</link>
  <description><![CDATA[ 


<!-- source: https://github.com/gadenbuie/garrickadenbuie-com/blob/main/_partials/title-block-link-buttons/title-block.html -->
<!--
<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
-->
<!-- <header id="title-block-header" class="quarto-title-block default page-columns"> -->
<!-- <div class="quarto-title page-columns page-full featured-image p-4" style="background-image: url(featured.png), url(featured.jpg), url(../featured.jpg);"> -->



<p>I’ve talked to a lot of people over the years about whether they’re a “proper” data scientist. When I started writing code to analyse data there were no data scientists in the NHS, or none that I knew at least. In 2012 data science was called <a href="https://hbr.org/2012/10/data-scientist-the-sexiest-job-of-the-21st-century">The sexiest job of the 21st Century</a> and still I couldn’t see it anywhere in the NHS. I started calling myself a data scientist around 2017, and I started calling the people in my team data scientists too. In my book, if you’re trying to get better at data science, that means if you’re trying to know more about computing than a statistician, and more about statistics than a software engineer, you’re a data scientist, however great or terrible you are at it. I have a long running joke that I have a special sword in my office that I can use to “Knight” people and make them Proper Data Scientists.</p>
<p>I had an experience that made me think about this long running issue recently. My team is working on quite a large complicated model that’s being rolled out at the moment. There was a big workshop coming up and we needed to get it looking the part. To meet the deadline I put everything else down for 1-2 weeks and wrote some code with the rest of the team. In my current role I basically never write any code which feels strange after 10 years of doing little else but that’s another blog post for another day. I was a little surprised, or I suppose not all that surprised, to find that I was a bit intimidated. I was sending pull requests for review to the person who wrote the code originally and I was a bit worried about what they’d think of me. This person is a helpful, friendly person I’ve known for a long time, never passes judgement on those who are still learning, they are line managed by me, and they know full well I haven’t written any code for a year (so might be sympathetic) but I was still worried about what they would think of my pull request.</p>
<p>And quite honestly the other part of my job, the what the heck else I do all day as a data scientist would doesn’t write code, I don’t really feel like I know what I’m doing there either for a good chunk of the time. I came to my new role to stretch and challenge myself and it’s certainly working but I’m often finding myself doing something I’ve never done before (leading a conference) or something I’ve done lots of times but am just not particularly good at (faffing around with budgets and timesheets and all the other paperwork stuff). The point of this blog post is to say that in my experience that fear never really goes away. My advice would be to stretch and challenge yourself, sure, but don’t question whether you’re a “proper” anything. I’m as good at writing code as I’m ever going to be now I’m doing other stuff with my time, and I’ve really just started the long journey to growing and improving as a data science team manager. And that’s OK. And if you’re reading this and you’re trying to be a better data scientist, however great or terrible you are at it, you’re a data scientist. And I’ll bring my special sword to knight you as a proper data scientist to the next NHS-R conference to prove it.</p>
<p>Chris Beeley, Head of Data Science, Strategy Unit, MLCSU</p>



<a onclick="window.scrollTo(0, 0); return false;" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Back to top</a><div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-reuse"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div class="quarto-appendix-contents"><div><a rel="license" href="https://creativecommons.org/publicdomain/zero/1.0/">CC0 1.0</a></div></div></section></div> ]]></description>
  <category>NHS-R</category>
  <guid>https://nhsrcommunity.com/blog/what-is-a-proper-data-scientist-anyway.html</guid>
  <pubDate>Mon, 08 Jan 2024 00:00:00 GMT</pubDate>
</item>
<item>
  <title>Coffee and Code</title>
  <dc:creator>Simon Wellesley-Miller</dc:creator>
  <link>https://nhsrcommunity.com/blog/coffee-and-code.html</link>
  <description><![CDATA[ 


<!-- source: https://github.com/gadenbuie/garrickadenbuie-com/blob/main/_partials/title-block-link-buttons/title-block.html -->
<!--
<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
-->
<!-- <header id="title-block-header" class="quarto-title-block default page-columns"> -->
<!-- <div class="quarto-title page-columns page-full featured-image p-4" style="background-image: url(featured.png), url(featured.jpg), url(../featured.jpg);"> -->



<p>Coffee and Code is an informal community gathering where people can come together to learn, share, and collaborate on all things R. People can give presentations on their work, ask questions, and share resources. The goal of Coffee and Code is to create a supportive and inclusive environment where everyone can feel comfortable asking for help and sharing their knowledge.</p>
<p>Coffee and Code is open to people of all skill levels, from beginners to experienced R users. The sessions are a great way to learn new things, meet other people who are interested in R, and get help with your own projects.</p>
<p><strong>When is coffee and code?</strong></p>
<p>It is an hour every other Friday at 11:00 – 12:00.</p>
<p><strong>Who is it aimed at?</strong></p>
<p>Everyone of course. We did a rough and self-determined straw poll. About 40% said they were beginners, 45% intermediate and 15% advanced. So please don’t feel that it is any way elitist.</p>
<p><strong>What do the sessions look like</strong>?</p>
<p>They are all different, the whole thing is organic, and we don’t have a strict agenda.</p>
<p><strong>A rough agenda</strong></p>
<ul>
<li><p>5 mins at the start to say hello and provide any updates.</p></li>
<li><p>35 – 45 mins as show and tells, this may be one or several demos of things that people have been doing.</p></li>
<li><p>5 mins for quick tip or library of the week.</p></li>
<li><p>Whatever time is left is then open to general discussion and going over the chat questions. This is a great place for people to post queries or ask for assistance. Hopefully this discussion will inform what will happen at the next session and get some volunteers to come forward.</p></li>
</ul>
<p><strong>We have a set of rules</strong></p>
<ul>
<li><p>First rule of C&amp;C club – Tell everyone about Coffee and Code.</p></li>
<li><p>Training sessions will be recorded, but general discussion will not.</p></li>
<li><p>Vegas Rules – what happens and C&amp;C stays in C&amp;C.</p></li>
<li><p>We share code and ideas, never patient data.</p></li>
<li><p>Be open and honest with a willingness to participate.</p></li>
</ul>
<p>No subject is too simple, and we all know there are many ways to program and quite often someone will post a link to a shortcut or a library to make life easier.</p>
<p>It is a very friendly atmosphere, and we try to be as inclusive as possible to whatever level you are at. This is all about sharing those little hints, tips and discoveries to make life easier.</p>
<p>When we do run tutorials we publish our code, with reproducible examples if possible.</p>
<p><strong>What are our goals?</strong></p>
<p>We want to have set space where we can get together as a community. This also means we link with other communities such as Analyst X, RAP and NHS-R. This helps to maintain the strong networking and positive momentum that are hallmarks of the NHS R community.</p>
<p>A strong community also gives us a strong voice. This is important to support those struggling with installation issues or getting the right training or all the weird and wonderful things that challenge us. It means we can identify training needs and help commission new courses.</p>
<p>Going to say it again three times because it is super important – community, community and community!</p>
<p><strong>What have you missed?</strong></p>
<p>We have run sessions on how to write and use loops, how to make choropleth (heat) maps, how to make pretty tables, how to create CSS templates for markdown and quarto, how to create dynamic commentary for reports, how to send and read emails and many other things.</p>
<p><strong>Join us!</strong></p>
<p>That’s my final plea, come and join us and keep this wonderful community alive and be proud to be part of it.</p>
<p>If you want an invite, ping me an email at <a href="mailto:simon.wellesley-miller@nhs.net">simon.wellesley-miller@nhs.net</a></p>
<p>Simon Wellesley-Miller, Senior Analytical Manager</p>



<a onclick="window.scrollTo(0, 0); return false;" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Back to top</a><div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-reuse"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div class="quarto-appendix-contents"><div><a rel="license" href="https://creativecommons.org/publicdomain/zero/1.0/">CC0 1.0</a></div></div></section></div> ]]></description>
  <category>NHS-R</category>
  <guid>https://nhsrcommunity.com/blog/coffee-and-code.html</guid>
  <pubDate>Tue, 14 Nov 2023 00:00:00 GMT</pubDate>
  <media:content url="https://nhsrcommunity.com/blog/img/startup.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>What was the “Unconference”?</title>
  <dc:creator>Ben Murch</dc:creator>
  <link>https://nhsrcommunity.com/blog/what-was-the-unconference.html</link>
  <description><![CDATA[ 


<!-- source: https://github.com/gadenbuie/garrickadenbuie-com/blob/main/_partials/title-block-link-buttons/title-block.html -->
<!--
<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
-->
<!-- <header id="title-block-header" class="quarto-title-block default page-columns"> -->
<!-- <div class="quarto-title page-columns page-full featured-image p-4" style="background-image: url(featured.png), url(featured.jpg), url(../featured.jpg);"> -->



<p>I’m going to invite controversy and say it was the best part of this year’s NHS R Community annual conference.</p>
<p>Not that the more traditional presentations in the main hall were not informative and interesting as ever.</p>
<p>Not that it wasn’t great to hear an array of brilliant and enthusiastic speakers – analysts, managers, academics – show how they are using R (and Python!) to solve real world problems with statistics, data science, evidence and coding.</p>
<p>Not that the new approach of inviting questions through Slack channels devoted to each of the talks didn’t lead to a lively interaction between audience and speakers.</p>
<p>But the Unconference embodied something else. Something that has been essential to the philosophy of the NHS R Community since its inception: the fact that NHS R <em>is</em> a <em>community</em>. Not a professional organisation. Not a cabal of experts who decant their wisdom to a group of acolytes. But a community built on participation – and on breaking down organisational boundaries and hierarchies.</p>
<p>So, what was it?</p>
<p>The brainchild of the hugely enthusiastic <a href="https://www.linkedin.com/in/dr-pawel-orzechowski/">Dr Pawel Orzechowski</a> from the University of Edinburgh, it was a simple idea to empower conference attendees.</p>
<p>In the morning of the first day of the conference, an ad hoc collage of snipped up conference timetables, oversized index cards, and sticky tape appeared on the window of the refreshments lounge.</p>
<p>During the course of the day people (most of them who had come along as ordinary conference attendees, who had arrived without pre-prepared PowerPoint presentations, who had not expected to be giving talks) quietly came forward* to post their own ideas for rival conference sessions against the more formal timetable for the main session (*some of them may have also received a bit of enthusiastic cajoling).</p>
<p>Scrawled in felt tip. Stuck to the wall with sticky tape. In some cases offering to lead sessions, in others making pleas for “someone who knows what they’re talking about!” to step up.</p>
<p>An alternative, crowd-sourced alternative to the main conference – the Unconference – emerged.</p>
<p>By the end of the first day the scrappy timetable glued to the pristine window of Edgbaston Cricket Ground conference lounge had been populated with a full day’s session. Pawel keenly handed anyone going into the room with green and gold stickers, encouraging them to stick and vote.</p>
<p>Around came day 2, and a new challenge.</p>
<p>Instead of walking into a room next to the main conference session as planned, it emerged Unconference attendees would have to engage in an epic (and confusing) odyssey down the back stairs, through the bowels of the stadium, and up into a different part of the building.</p>
<p>It was a bit confusing. But fired with enthusiasm to nerd out discussing statistics and modelling, debate the practicalities of professional registration, put heads together to understand how to better use Quarto to automate reporting, and a whole range of other topics, lively groups and thoughtful individuals made the trek back and forth throughout the day.</p>
<p>Unlike the main conference sessions these were active discussions. Crowded around the big round tables – at times pushing them together – participants leaned in to discuss, debate, disagree, challenge, and help each other grapple with things that mattered to them in their jobs, their careers, their professional community.</p>
<p>One high point for me was a nerd-out discussion on prediction intervals, bravely proposed and hosted by Simon Newey which involved lively discussions about the best error distributions to use when modelling hospital activity, the relative merits of classical vs Bayesian/simulation-based regression models, and the near-universal experience of stopping halfway through trying to build such a model to scratch your head and say “what does it all mean?”</p>
<p>Another was a discussion with NHS R Community founder and stalwart Prof Mohammed A Mohammed, about how we can move from lots of people independently working on the same problems – such as projecting/forecasting A&amp;E attendance or hospital occupancy – again and again, and instead taking the best from all of those previous pieces of work and scaling them up collaboratively into sustainable approaches that the whole health and care system can use.</p>
<p>These were lively, disruptive (to use Prof Mohammed’s preferred phrase, in the tech innovation sense) sessions which brought together people from across the health and social care sector – hospital modellers, NHS England data scientists, civil servants, academics – and from across the career spectrum, from junior analysts through to senior (technical) managers and specialists, where their job roles, organisations and seniority were not mentioned. Only their ideas and their enthusiasm to use data and analytics to make the NHS – and the wider system – better for everyone.</p>
<p>This is the very spirit of the NHS R Community.</p>
<p>But it doesn’t end there!</p>
<p>If you’ve read this far, then we’ve got you. You have been co-opted.</p>
<p>Prof Mohammed wants you to tell him <em>your</em> ideas for how to solve this tricky problem of scaling our analytics into whole system solutions. Find out more in <a href="https://nhsrway.nhsrcommunity.com/community-handbook.html#nhs-r-slack">NHS-R Slack</a> where you can also find Prof Mohammed.</p>
<p>Zoë Turner (Senior Data Scientist at The Strategy Unit and now coordinator for the NHS R Community) wants not just your ideas, but maybe even your membership of the NHS R Community Committee to shape its future. You can join those discussions at the <a href="https://nhsrway.nhsrcommunity.com/community-handbook.html#nhs-r-slack">NHS-R Slack</a>, or get in touch with her directly at <a href="mailto:zoe.turner3@nhs.net">zoe.turner3@nhs.net</a>.</p>
<p>In fact, the discussion did not stop at Edgbaston for any of the Unconference topics – they are all still live on the NHS-R Community #unconferencing-session-2023 Slack channel here, waiting for you to add your voice.</p>
<p>Ben Murch, Senior Analytics Manager NECS Consultancy and NHS R Community Senior Fellow</p>



<a onclick="window.scrollTo(0, 0); return false;" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Back to top</a><div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-reuse"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div class="quarto-appendix-contents"><div><a rel="license" href="https://creativecommons.org/publicdomain/zero/1.0/">CC0 1.0</a></div></div></section></div> ]]></description>
  <category>Conference</category>
  <guid>https://nhsrcommunity.com/blog/what-was-the-unconference.html</guid>
  <pubDate>Mon, 30 Oct 2023 00:00:00 GMT</pubDate>
  <media:content url="https://nhsrcommunity.com/blog/img/unconferencing-notes.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>NHS-R Community needs help</title>
  <dc:creator>Zoë Turner</dc:creator>
  <link>https://nhsrcommunity.com/blog/nhs-r-community-needs-help.html</link>
  <description><![CDATA[ 


<!-- source: https://github.com/gadenbuie/garrickadenbuie-com/blob/main/_partials/title-block-link-buttons/title-block.html -->
<!--
<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
-->
<!-- <header id="title-block-header" class="quarto-title-block default page-columns"> -->
<!-- <div class="quarto-title page-columns page-full featured-image p-4" style="background-image: url(featured.png), url(featured.jpg), url(../featured.jpg);"> -->



<p>I’ve been an analyst for over a decade in the NHS and for the most part I’d never been to a conference related to my work. Partly it was that they didn’t really exist but also that there is a cost involved for tickets, travel, sometimes hotel, and there was never any budget. Then in 2018 things changed for me. NHS-R Community was set up and I went to one of the first free training sessions in Leeds and because it was free I got a rare agreement for the Trust to cover the costs for travel and hotel. Also in 2018 we had the first (still free!) NHS-R Community conference and I got a lift there so the only cost was the of me being away from my work.</p>
<p>Since 2020 the conference has been either fully in person or streamed so more people can join <sup><a href="http://localhost:6380/#fn1">1</a></sup> and one of the great side effects of going virtual is that things are recorded so we have a <a href="https://www.youtube.com/c/nhsrcommunity">YouTube channel</a> full of wonderful content from the NHS-R Community. And we also have increasing opportunity to go to other conferences like <a href="https://uobevents.eventsair.com/haca-2023/">HACA</a> and <a href="https://www.aphanalysts.org/">AphA</a> but with greater choice it can become even harder to justify the time out of the job to attend or catch up on conferences.</p>
<p>This year’s NHS-R/NHS.pycom conference was a success for those that could attend and partly that’s because we tried things out:</p>
<ul>
<li><p>we did QR codes to sign in and <a href="https://github.com/nhs-r-community/conf-23-checkin">the code</a> is in the open</p></li>
<li><p>we gave <a href="https://resources.nhsrcommunity.com/forum-groups.html#slack">Slack</a> a go for questions and got really great conversations and connections</p></li>
<li><p>we tried <a href="https://soundcloud.com/nhs-r-community/nhs-r-nhs-pycom-conference-newscast-10th-october-2023">unconferencing</a> where people made suggestions for round table talks.</p></li>
</ul>
<p>But we got things wrong:</p>
<ul>
<li><p>we don’t have subtitles on our streamed recordings</p></li>
<li><p>we didn’t collate presentation links or share them in advance of the talks</p></li>
<li><p>we didn’t promote the conference as well as we’ve done in previous years.</p></li>
</ul>
<p>We can do better.</p>
<p>But what is it that we want to be better at?<br>
Is it putting on a better conference?<br>
Is it producing more output that convinces managers who are not sure of the uses of open source programming?<br>
Is it changing our name as it suggests we are just “NHS” and “R” – which we aren’t?<br>
Have we done enough?</p>
<p>We might have a lot of work to do but one thing I do know is that if we are going to do more we are going to do this together because all that we’ve built has been by us: the NHS-R Community.</p>
<p>And how do we do better? I think we need to start with a new Committee to help shape the next 3 years. We have questions around rebranding and promotion of the work we do, how do we measure how successful we are (which helps with funding opportunities), what shall we do with our space at the <a href="https://uobevents.eventsair.com/haca-2023/">HACA conference</a> 2024, and of course there is our own conference to plan.</p>
<section id="can-you-help" class="level2">
<h2 class="anchored" data-anchor-id="can-you-help"><strong>Can you help?</strong></h2>
<p>Would you come to the Committee and share your views? The more diverse the better.</p>
<p>We need commitment of your time and, more importantly, we need your enthusiasm and desire to keep the NHS-R Community going so in the next few weeks I’ll be setting up Committee meeting where our first task will be to shape what we, as a Committee and a Community, will do.</p>
<p>If you are interested in being involved with the Committee please contact me via our Slack group or email <a href="mailto:zoe.turner3@nhs.net">zoe.turner3@nhs.net</a></p>
</section>
<section id="join-the-slack-groups" class="level2">
<h2 class="anchored" data-anchor-id="join-the-slack-groups"><strong>Join the Slack groups</strong></h2>
<p>Details are in the <a href="https://resources.nhsrcommunity.com/forum-groups.html#slack">Open Analytics Resources</a> and feel free to contact NHS-R Community via email at <a href="mailto:nhs.rcommunity@nhs.net">nhs.rcommunity@nhs.net</a></p>
</section>
<section id="footnotes" class="level2">
<h2 class="anchored" data-anchor-id="footnotes"><strong>Footnotes</strong></h2>
<ol type="1">
<li><p>Hybrid is a tricky label to give a conference as you need to have both participants and speakers to be in person and virtual so I can’t say that we’ve done that in NHS-R Community..<a href="http://localhost:6380/#fnref1">↩︎</a></p>
<h3 id="comments" class="anchored">Comments</h3></li>
</ol>
<!-- -->
<ol type="1">
<li><p><strong>Calum Polwart</strong></p>
<p>20 October 2023</p>
<p>Sorry I didn’t attend this year. I attended for the first time last year, because I had something to share. I’m sure I will be picking up some video too. I’m sure everyone will be different but some off the cuff thoughts from me - It’s hard until you go, to know quite how geeky it will/will not be (answer as geeky as you want!) Timing. I don’t know why but Oct-Dec for me seems to be peak conference season! This isn’t my only part of my job and so I need to balance things. Posters. To me posters are a big thing at conferences. You can get ‘up close and personal’ with the presenter. Is there scope for poster presentation as well as stage? And what about opportunities to critique… Bring your last graph… We will tell you what could be better? I’m there to learn so I need to know how to improve. Any opportunities for a Hackathon?</p></li>
<li><p><strong>Zoë Turner</strong></p>
<p>20 October 2023</p>
<p>Thanks for these comments! Much appreciated and we will be definitely be talking about some of these (posters, timing, hackathons) at the Committee. You’d be very welcome to join in :) Details are in the blog.</p></li>
<li><p><strong>Charlotte Foster</strong></p>
<p>26 October 2023</p>
<p>Is this a call for help to analysts in all departments? I’d be interested in having a conversation! :)</p></li>
<li><p><strong>Zoë Turner</strong></p>
<p>30 October 2023</p>
<p>Absolutely yes it’s a call for anyone in the NHS-R Community and that includes all public sector and Government organisations. Please do get in touch! Thanks</p></li>
</ol>


</section>

<a onclick="window.scrollTo(0, 0); return false;" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Back to top</a><div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-reuse"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div class="quarto-appendix-contents"><div><a rel="license" href="https://creativecommons.org/publicdomain/zero/1.0/">CC0 1.0</a></div></div></section></div> ]]></description>
  <category>NHS-R</category>
  <guid>https://nhsrcommunity.com/blog/nhs-r-community-needs-help.html</guid>
  <pubDate>Fri, 20 Oct 2023 00:00:00 GMT</pubDate>
</item>
<item>
  <title>AphA blog – August 2023</title>
  <dc:creator>Zoë Turner</dc:creator>
  <link>https://nhsrcommunity.com/blog/apha-blog-august-2023.html</link>
  <description><![CDATA[ 


<!-- source: https://github.com/gadenbuie/garrickadenbuie-com/blob/main/_partials/title-block-link-buttons/title-block.html -->
<!--
<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
-->
<!-- <header id="title-block-header" class="quarto-title-block default page-columns"> -->
<!-- <div class="quarto-title page-columns page-full featured-image p-4" style="background-image: url(featured.png), url(featured.jpg), url(../featured.jpg);"> -->



<section id="dataconnect23-reminder" class="level1">
<h1><strong>DataConnect23 reminder</strong></h1>
<p>Links are out now for the <a href="https://www.eventbrite.co.uk/o/dataconnect23-34583087823">DataConnect23</a> and there is a lot to sign up to in the free week long event! It’s organised by the UK Government’s Central Digital and Data Office along with the Government Data Quality Hub and is open to public sector (NHS and Local Authorities) as well as Government.</p>
<p>I’ll be doing a <a href="https://www.eventbrite.co.uk/e/nhs-r-community-invites-you-to-its-toolshed-tickets-691670002597?aff=ebdsoporgprofile">workshop</a> promoting NHS-R Community and the work we do and people can get involved with so do sign up!</p>
</section>
<section id="nhs-r-community-conference-update" class="level1">
<h1><strong>NHS-R Community conference update</strong></h1>
<p>A special shout out to our administrative support (who will be reluctant to be named directly but if you are in the Slack group then you’ll know who I’m referring to!) for working so hard putting together the several days worth of talks we have for the NHS-R Conference. We’ll have the in person days on 17-18 October which are also viewable online but then there will be specific online days on 9-11 October.</p>
<p>Sign up through the website where you will need to register first. Details on how we manage the website and accounts are in the <a href="https://nhsrway.nhsrcommunity.com/community-handbook.html#website">NHS-R Way book</a> and if you have any issues with setting up an account please check out the book for more details.</p>
</section>
<section id="r-for-data-science-project" class="level1">
<h1><strong>R for Data Science project</strong></h1>
<p>What started out as a book club reading the first edition (online) of the R4DS has now expanded into replicating the <a href="https://r4ds-solutions.nhsrcommunity.com/">R4DS Unofficial Solutions</a> and is now meeting as a project group rather than book club.</p>
<p>I’ve particularly enjoyed going through the exercises for a Quarto book as I somehow find it more engaging than just writing the solutions in an R script. Difficult to explain why but I went to a recent <a href="https://www.youtube.com/playlist?list=PL9HYL-VRX0oTu3bUoyYknD-vpR7Uq6bsR">Posit Hangout</a> where Hadley Wickham talked about writing Quarto books for everything, including his current hobby of cocktails and this resonated!</p>
<p>One particular exercise I came across in the R4DS is to correct some code: <code>libary(todyverse) ggplot(dTA = mpg) + geom_point(maping = aes(x = displ y = hwy)) + geom_smooth(method = "lm)</code></p>
<p>which is surprisingly hard as there is a lot to correct. It’s quite enjoyable to test your knowledge out though so I’d recommend having a go (before looking at the <a href="https://r4ds-solutions.nhsrcommunity.com/">solutions</a>!)</p>
<section id="join-the-slack-groups" class="level2">
<h2 class="anchored" data-anchor-id="join-the-slack-groups"><strong>Join the Slack groups</strong></h2>
<p>Details are in the <a href="https://resources.nhsrcommunity.com/forum-groups.html#slack">Open Analytics Resources</a> and feel free to contact NHS-R Community via email at <a href="mailto:nhs.rcommunity@nhs.net">nhs.rcommunity@nhs.net</a></p>


</section>
</section>

<a onclick="window.scrollTo(0, 0); return false;" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Back to top</a><div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-reuse"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div class="quarto-appendix-contents"><div><a rel="license" href="https://creativecommons.org/publicdomain/zero/1.0/">CC0 1.0</a></div></div></section></div> ]]></description>
  <category>NHS-R</category>
  <guid>https://nhsrcommunity.com/blog/apha-blog-august-2023.html</guid>
  <pubDate>Tue, 05 Sep 2023 00:00:00 GMT</pubDate>
</item>
<item>
  <title>July Blog</title>
  <dc:creator>Zoë Turner</dc:creator>
  <link>https://nhsrcommunity.com/blog/july-blog.html</link>
  <description><![CDATA[ 


<!-- source: https://github.com/gadenbuie/garrickadenbuie-com/blob/main/_partials/title-block-link-buttons/title-block.html -->
<!--
<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
-->
<!-- <header id="title-block-header" class="quarto-title-block default page-columns"> -->
<!-- <div class="quarto-title page-columns page-full featured-image p-4" style="background-image: url(featured.png), url(featured.jpg), url(../featured.jpg);"> -->



<section id="government-data-science-toolshed-meetup-and-dataconnect23" class="level1">
<h1><strong>Government Data Science Toolshed Meetup and DataConnect23</strong></h1>
<p>Back in June I attended a <a href="https://www.eventbrite.com/e/government-data-science-community-meet-up-the-data-science-toolshed-tickets-578774920367">Government Data Science (GDS) Toolshed</a> meetup for Public Sector and cross Government, the name coming from the idea that we have tools that we’ve built in our teams that we’d like to share. Matt Dray skilfully found a <a href="https://matt-dray.github.io/government-toolshed/#/a-metaphor">metaphor</a> (and corresponding pictures) to explain this idea and I got the chance to showcase NHS-R GitHub repository and invite people to join us in our Toolshed!</p>
<p>Inspired by this way of thinking about the NHS-R Community GitHub I’ll be doing a workshop repeating this message for the upcoming <a href="https://www.gov.uk/government/news/dataconnect23-is-on-its-way">DataConnect23</a> which is open to Public Sector and Cross Government. My hope is that I can get the message out to as many people as I can about how this is a place where you can get involved as much, or as little, as you like. We have a toolshed where people can practice, play and use tools we’ve created.</p>
</section>
<section id="catch-up-questions" class="level1">
<h1><strong>Catch up questions</strong></h1>
<p>The GDS Toolshed meetup was incredibly popular and I was able to answer a few questions at the time but there were still a few to get around to and I will use this blog to answer them.</p>
<section id="how-do-you-get-support-and-recognition-for-your-work-building-the-community" class="level2">
<h2 class="anchored" data-anchor-id="how-do-you-get-support-and-recognition-for-your-work-building-the-community"><strong>How do you get support and recognition for your work building the community?</strong></h2>
<p>I can’t clarify if this was a particularly directed question for me as an individual or more about anyone wishing to get involved with NHS-R (or any community) but I’ll assume it was the latter as that covers me too!</p>
<p>Getting time allocated to working on what are seemingly side projects, or getting recognition for your efforts can definitely feel strange and I’ve never formally requested or put forward anything like a business case to do this. I’ve been lucky to have a manager who could see the value in the work that NHS-R Community do and how that will consequently benefit my work as well as ultimately contribute to making the NHS better.</p>
<p>Talking about the NHS-R Github like a Toolshed was a bit of an epiphany for me because the things we make are sometimes highly polished things (the packages {NHSRdatasets} and {NHSRplotthedots} both on CRAN are very professional projects) whilst many other repositories are just set up or very much work in progress. Sometimes things get started and then abandoned and that’s ok as we can archive things in GitHub so they are not lost but are tidied away!</p>
<p>I, and others, have been able to do things which were not directly related to our work, like teaching and creating websites/books using R, but I’ve certainly gone on to use those skills in my work and I’m sure others have done too. Quantifying and justifying why this is useful will take time in itself and the question is, is that useful when I could be learning through doing?</p>
</section>
</section>
<section id="how-does-nhs-r-go-out-to-trustscommunity-to-uncover-tools" class="level1">
<h1><strong>How does NHS-R go out to trusts/community to uncover tools?</strong></h1>
<p>Great question and it has to be simply, the NHS-R Community lets us know.</p>
<p>For the tools that I showed in the talk, where people had passed them to NHS-R Community, those individuals had prompted the move and it was very welcomed. We’ve had a few things over the years created on the GitHub repository directly but recently we’ve had projects passed to us. I guess the reason for this is around centralisation, having projects located in the NHS-R Community itself helps raise the profile, making them more discoverable and by giving the repositories to NHS-R people can continue to be involved, take full credit and maybe, hopefully, take away some of the barriers to inviting contributions.</p>
<p>In finding tools, I’m a bit like a magpie and collect links all the time and I don’t think I’m alone in that as we had a few attempts on getting things coordinated with “finds” as we’ve come to refer to them. We now have a very informal process where we, as a community, share anything we think is fun or useful (or both!) in the #finds channel in <a href="https://nhsrcommunity.slack.com/">Slack</a> and then promote that in blogs here and talk about them on the NHS-R <a href="https://soundcloud.com/nhs-r-community">Newscast</a>.</p>
<p>I’ve also built upon some open source work previously started by <a href="https://www.aphanalysts.org/">AphA Analysts</a>, for a book called <a href="https://resources.nhsrcommunity.com/">Open Analytics Resources</a> where I keep a lot of the links I’ve found and people have shared on the Slack. This book is slightly more curated towards NHS analyst needs and features NHS-R, NHS and Government resources and if you are wanting almost a “definitive guide to resources” then a better place to go, as well as contribute to, is the <a href="https://www.bigbookofr.com/">Big Book of R</a> which has thousands of resources!</p>
<section id="what-lessons-did-you-learn-in-growing-a-community" class="level2">
<h2 class="anchored" data-anchor-id="what-lessons-did-you-learn-in-growing-a-community"><strong>What lessons did you learn in growing a community?</strong></h2>
<p>For me it’s the realisation that work is fun and rewarding because of people and their kindness. I wouldn’t have known that I needed something like the NHS-R Community before it existed. In fact, I only came to know about it because a colleague mentioned there were some free R courses by NHS-R back in 2018. That could have been the end of my involvement but the work of passionate people to get the community up and running meant more opportunities were created where I could get involved and no one said no I couldn’t.</p>
<p>So frequently we have things “dictated” to us in our work but with communities, it’s more equal. Yes, some people will know more things but if you can work combine your skills and experiences we can make an even greater impact.</p>
</section>
<section id="do-you-think-it-was-hindrance-to-name-it-nhs-r-or-did-that-help-build-the-community-at-the-beginning" class="level2">
<h2 class="anchored" data-anchor-id="do-you-think-it-was-hindrance-to-name-it-nhs-r-or-did-that-help-build-the-community-at-the-beginning"><strong>Do you think it was hindrance to name it NHS-R? Or did that help build the community at the beginning?</strong></h2>
<p>Yes, it probably helped to rapidly build a trusted “brand” but now we are conscious that the name “NHS” and “R” can feel exclusionary. Whilst there have never been strict boundaries to who can get involved we still need to work hard to tell people we are more than NHS and interested in more than R. Perhaps one day we won’t have to do this, maybe we’ll need a rebrand, but whatever the solution there is nothing like word of mouth to get the message out.</p>
<p>How we fit in with other communities is difficult too, not because we don’t get on but because we want to be inclusive and so overlap but we don’t want to take over. There are many people who you’ll find in all three communities: NHS-R, NHS Pycom and Government Data Science (me for example) who get something different from each group. I personally have all three Slack channels open and keep an eye on all the conversations because I’m curious but I’m most active in NHS-R and Government Data Science Slack groups because that’s where I’m most confident in my own knowledge of NHS and R.</p>
</section>
</section>
<section id="nhs-r-community-conference-update-questions-and-social-media" class="level1">
<h1><strong>NHS-R Community conference update – questions and social media</strong></h1>
<p>We have had our highest ever submission of abstracts this year! Consequently, as we hope to give as many people as possible a presentation slot we’ve decided to try out having everyone at the next NHS-R Community conference ask questions virtually. Our intention is to give equal opportunity to virtual attenders to get involved in what will be a streamed event in terms of the hybrid days on 17-18 October.</p>
<p>This is just a trial but if you have any suggestions or advice for us as we continue planning this event, please do get in touch!</p>
<section id="join-the-slack-groups" class="level2">
<h2 class="anchored" data-anchor-id="join-the-slack-groups"><strong>Join the Slack groups</strong></h2>
<p>Details are in the <a href="https://resources.nhsrcommunity.com/forum-groups.html#slack">Open Analytics Resources</a> and feel free to contact NHS-R Community via email at <a href="mailto:nhs.rcommunity@nhs.net">nhs.rcommunity@nhs.net</a></p>


</section>
</section>

<a onclick="window.scrollTo(0, 0); return false;" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Back to top</a><div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-reuse"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div class="quarto-appendix-contents"><div><a rel="license" href="https://creativecommons.org/publicdomain/zero/1.0/">CC0 1.0</a></div></div></section></div> ]]></description>
  <category>NHS-R</category>
  <guid>https://nhsrcommunity.com/blog/july-blog.html</guid>
  <pubDate>Wed, 19 Jul 2023 00:00:00 GMT</pubDate>
</item>
</channel>
</rss>
